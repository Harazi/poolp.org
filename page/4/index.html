<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>poolp.org - poolp.org</title><meta property="og:title" content="poolp.org"><meta name=twitter:title content="poolp.org"><meta name=author content="Gilles Chehade"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"poolp.org","url":"https:\/\/poolp.org\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/poolp.org\/"}</script><meta property="og:title" content="poolp.org"><meta property="og:url" content="https://poolp.org/"><meta property="og:type" content="website"><meta property="og:site_name" content="poolp.org"><meta name=twitter:title content="poolp.org"><meta name=twitter:card content="summary"><meta name=twitter:site content="@poolpOrg"><meta name=twitter:creator content="@poolpOrg"><meta name=twitter:card content="summary"><meta name=twitter:site content="@poolpOrg"><meta name=twitter:creator content="@poolpOrg"><meta property="og:url" content="https://poolp.org/"><meta property="og:type" content="website"><meta property="og:site_name" content="poolp.org"><meta name=generator content="Hugo 0.82.1"><link rel=alternate href=https://poolp.org/index.xml type=application/rss+xml title=poolp.org><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://poolp.org/css/main.css><link rel=stylesheet href=https://poolp.org/css/highlight.min.css><link rel=stylesheet href=https://poolp.org/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><link rel=stylesheet href=/css/poolp.css></head><body><div class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarScroll aria-controls=navbarScroll aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=https://poolp.org/ target=_blank>poolp.org</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li class=navlinks-container><a class=navlinks-parent>Freelance</a><div class=navlinks-children><a href=/en/contracting/>[en] Hire me !</a>
<a href=/fr/contracting/>[fr] Recrutez moi !</a></div></li><li class=navlinks-container><a class=navlinks-parent>Social</a><div class=navlinks-children><a href=https://patreon.com/gilles>Patreon</a>
<a href=https://www.linkedin.com/in/gilleschehade>LinkedIn</a>
<a href=https://github.com/poolpOrg>Github</a>
<a href=https://twitter.com/poolpOrg>Twitter</a></div></li><li class=navlinks-container><a class=navlinks-parent>Curriculum</a><div class=navlinks-children><a href=https://github.com/poolpOrg/resume/blob/master/resume.en.pdf>EN</a>
<a href=https://github.com/poolpOrg/resume/blob/master/resume.fr.pdf>FR</a></div></li><li><a title=Hypnose href=https://hypno.cat>Hypnose</a></li></ul></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div><div class=page-heading></div></div></div></div></div></header><div role=main class=container><div class=row><div><div class=posts-list><article class=post-preview><a href=https://poolp.org/posts/2018-12-21/opensmtpd-now-supports-regex-in-match-rules/><h2 class=post-title>OpenSMTPD now supports regex in match rules</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;308&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: regex table lookups were introduced for builtin filters. After a few weeks of working solely on filters, I wanted to work on something else. Using the same mechanism, all match criterias using tables can support regex. K_REGEX lookups The table mechanism is used within OpenSMTPD to perform all kinds of lookups.
Recently, while working on builtin filters, I introduced the K_REGEX lookup type allowing tables to serve regex(3) patterns.
<a href=https://poolp.org/posts/2018-12-21/opensmtpd-now-supports-regex-in-match-rules/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-12-19/more-on-opensmtpd-filters/><h2 class=post-title>more on OpenSMTPD filters</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;9&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1831&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: Not this time, pal/gal, I took hours writing this post, you'll take a few minutes reading it all. Oh, and merry X-mas :-* A bit of short-sighted history The filtering feature has been introduced only recently in OpenSMTPD, first presented on this blog a month ago.
I had a working proof-of-concept running on my laptop and my plan was to start bringing the code to the OpenBSD tree, small chunks by small chunks, through a serie of diffs.
<a href=https://poolp.org/posts/2018-12-19/more-on-opensmtpd-filters/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-12-06/opensmtpd-proc-filters-fc-rdns/><h2 class=post-title>OpenSMTPD proc filters & fc-rDNS</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;652&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: I *FINALFUCKINGLY* commited proc filters support allowing full filtering in OpenSMTPD. eric@ implemented fc-rDNS lookups. fc-rDNS fc-rDNS, or forward-confirmed reverse DNS, consists in performing a reverse DNS lookup to determine the hostname associated to an IP address&mldr; then performing a DNS lookup on that hostname to check if it resolves back to the IP address.
On my request, eric@ implemented fc-rDNS lookups in our SMTP engine, causing OpenSMTPD to perform the double lookup upon clients connections.
<a href=https://poolp.org/posts/2018-12-06/opensmtpd-proc-filters-fc-rdns/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-11-09/opensmtpd-reporting-update/><h2 class=post-title>OpenSMTPD reporting update</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;6&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1264&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: The reporting mechanism has been described shortly in my previous article about both reporting and filters. Let's focus a bit more on the reporting bits this time. The format is improving further and has extended to outgoing trafic reporting. Reporting In previous article, I described the events reporting mechanism that has been introduced in the development branch of OpenSMTPD.
To sum it up, you could now write an event processor as simple as a shell script reading its stdin on a loop:
<a href=https://poolp.org/posts/2018-11-09/opensmtpd-reporting-update/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-11-03/opensmtpd-released-and-upcoming-filters-preview/><h2 class=post-title>OpenSMTPD released and upcoming filters preview</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;11&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;2246&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: Filters have been a (the most ?) long awaited feature in OpenSMTPD. I finally committed most of the filters code to OpenBSD. There is still a bit of work required but the trickiest parts are done. This article describes how filters are implemented and what to expect. OpenSMTPD 6.4.0 was released ! We have released OpenSMTPD 6.4.0 last week without filters.
I won&rsquo;t expand on the features in the 6.
<a href=https://poolp.org/posts/2018-11-03/opensmtpd-released-and-upcoming-filters-preview/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-05-21/switching-to-opensmtpd-new-config/><h2 class=post-title>switching to OpenSMTPD new config</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;9&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1759&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: Switching to new config is not too hard and can be done in minutes. The new config is also a new queue that is not backwards compatible. The easiest way is to flush the mail queue before switching. We came up with a solution to help maintainers of more complex setups. Switching from old config to new config The new OpenSMTPD configuration grammar is slightly different from the current one, rules are no longer stated as single lines, but the conversion from previous ruleset to new ruleset isn&rsquo;t that hard.
<a href=https://poolp.org/posts/2018-05-21/switching-to-opensmtpd-new-config/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-04-30/opensmtpd-new-config/><h2 class=post-title>OpenSMTPD new config</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;8&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1509&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: OpenBSD #p2k18 hackathon took place at Epitech in Nantes. I was organizing the hackathon but managed to make progress on OpenSMTPD. As mentionned at EuroBSDCon the one-line per rule config format was a design error. A new configuration grammar is almost ready and the underlying structures are simplified. Refactor removes ~750 lines of code and solves _many_ issues that were side-effects of the design error. New features are going to be unlocked thanks to this.
<a href=https://poolp.org/posts/2018-04-30/opensmtpd-new-config/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-01-29/install-openbsd-on-dedibox-with-full-disk-encryption/><h2 class=post-title>Install OpenBSD on dedibox with full-disk encryption</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;11&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;2296&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: I run several "dedibox" servers at online.net, all powered by OpenBSD. OpenBSD is not officially supported so you have to work-around. Running full-disk encrypted OpenBSD there is a piece of cake. As a bonus, my first steps within a brand new booted machine ;-) Step #0: choosing your server OpenBSD is not officially supported, I can&rsquo;t guarantee that this will work for you on any kind of server online.
<a href=https://poolp.org/posts/2018-01-29/install-openbsd-on-dedibox-with-full-disk-encryption/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-01-08/spfwalk/><h2 class=post-title>spfwalk</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;950&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: deraadt@ thought it would be nice to have a spf fetch utility in base. Aaron Poffenberger wrote a shell-based `spf_fetch` utility. I wrote a C-based `spfwalk` utility that's `pledge()`-ed. The `spfwalk` utility got merged to `smtpctl`. What&rsquo;s SPF in a few words SPF is the Sender Policy Framework, a standard to verify the domain name of an e-mail sender.
Long story short, the SMTP protocol does not come with a way to authenticate a domain and, during an SMTP session, nothing really prevents a sender from pretending to come from any domain:
<a href=https://poolp.org/posts/2018-01-08/spfwalk/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-01-08/news-from-the-front/><h2 class=post-title>News from the front !</h2></a><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;277&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span><div class=post-entry>TL;DR: Came very close to a burn out late 2016, had to quit former employer. Started working at another company early 2017. Became a student again, currently halfway through second year in psychology. Haven't done much opensource since early 2017, slowly resuming. Happy new year ! I wish you a very happy new year 2018 and hope that you succeed in whatever you attempt.
It feels odd to write again to this blog considering the last blog post dates from September 2016, over a year ago.
<a href=https://poolp.org/posts/2018-01-08/news-from-the-front/ class=post-read-more>[Read More]</a></div></article></div><hr><div><ul class="pager main-pager"><li class=previous><a href=https://poolp.org/page/3/>&larr; Newer Posts</a></li><li class=next><a href=https://poolp.org/page/5/>Older Posts &rarr;</a></li></ul></div></div></div><footer><p><h2>Like my work and want to help me ?</h2><ul><li>Consider <b>tipping me</b> on <b><a target=_blank href=https://paypal.me/poolpOrg>PayPal</a></b>,
<b>supporting me</b> through one of the <b>sponsoring</b> platforms at <b><a href=https://github.com/sponsors/poolpOrg>Github</a></b>, <b><a href=https://patreon.com/gilles>Patreon</a></b> or
<b><a href=https://liberapay.com/poolpOrg>LiberaPay</a></b>,
or even <b>getting me something</b> from my wishlist on <b><a target=_blank href=http://amzn.eu/3MwH6CX>Amazon</a></b>
for positive <b><a href=https://en.wikipedia.org/wiki/Reinforcement>reinforcement</a></b> :-)<br></li><li>You can also help me by <b>commenting articles</b> to spark discussions,
and by <b>sharing them</b> so they reach a bigger audience,
they all contain a comment link and icons that will let you share to popular social networks.</li></ul></p><p class="credits copyright text-muted"><a href=https://poolp.org>Gilles Chehade</a>
-&nbsp;&copy;
2021
-
<a href=https://poolp.org/>poolp.org</a></p><p class="credits theme-by text-muted"><a href=http://gohugo.io>Hugo v0.82.1</a> powered - adapted from a weird mix of <a href=http://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a>, <a href=https://papercss-hugo-theme.netlify.app/>PaperCss</a> and some <a href=https://github.com/davidrzs/latexcss>LatexCSS</a></p></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://poolp.org/js/main.js></script><script src=https://poolp.org/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script>renderMathInElement(document.body)</script></body></html>