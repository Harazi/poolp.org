<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.104.3"><link rel=icon href=/images/poolp_org.png><title>October 2022: blog comments, a bit of plakar and the streamchain project | poolp.org</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://poolp.org/posts/2022-10-18/october-2022-blog-comments-a-bit-of-plakar-and-the-streamchain-project/cover.png"><meta name=twitter:title content="October 2022: blog comments, a bit of plakar and the streamchain project"><meta name=twitter:description content="TL;DR: added comments support to the blog, did some music and hypnosis projects, fixed a few bugs in plakar and began a new toy project. Shout out to my sponsors ❤️ A HUGE thanks goes to my sponsors on github and patreon: your continuous support is very much appreciated !
I created a Discord where I hang out and discuss my projects or screencast as I work on them. Feel free to hop in if you want, and feel free to do just like me and share thoughts as you work on your own projects there: this is a virtual hack room for anyone to join: https://discord."><meta property="og:title" content="October 2022: blog comments, a bit of plakar and the streamchain project"><meta property="og:description" content="TL;DR: added comments support to the blog, did some music and hypnosis projects, fixed a few bugs in plakar and began a new toy project. Shout out to my sponsors ❤️ A HUGE thanks goes to my sponsors on github and patreon: your continuous support is very much appreciated !
I created a Discord where I hang out and discuss my projects or screencast as I work on them. Feel free to hop in if you want, and feel free to do just like me and share thoughts as you work on your own projects there: this is a virtual hack room for anyone to join: https://discord."><meta property="og:type" content="article"><meta property="og:url" content="https://poolp.org/posts/2022-10-18/october-2022-blog-comments-a-bit-of-plakar-and-the-streamchain-project/"><meta property="og:image" content="https://poolp.org/posts/2022-10-18/october-2022-blog-comments-a-bit-of-plakar-and-the-streamchain-project/cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-18T11:11:00+02:00"><meta property="article:modified_time" content="2022-10-18T11:11:00+02:00"><link href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css rel=stylesheet integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.0.13/css/all.css integrity=sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link href=/css/medium.css rel=stylesheet><link href=/css/additional.css rel=stylesheet><link href=/css/syntax.css rel=stylesheet><link href=/css/custom.css rel=stylesheet></head><body><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href=https://poolp.org/><img src=/images/poolp_org.png alt=logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/fr/contracting/>Freelance</a></li><li class=nav-item><a class=nav-link href=https://discord.gg/YC6j4rbvSk>Discord</a></li><li class=nav-item><a class=nav-link href=https://www.youtube.com/channel/UCU-1Rn7gWhessHWwC3_EsEg>Youtube</a></li><li class=nav-item><a class=nav-link href=https://hypno.cat>Hypnose</a></li><li class=nav-item><a class=nav-link href=/authors/gilles-chehade>About Me</a></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset"><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=October%202022%3a%20blog%20comments%2c%20a%20bit%20of%20plakar%20and%20the%20streamchain%20project&url=https%3a%2f%2fpoolp.org%2fposts%2f2022-10-18%2foctober-2022-blog-comments-a-bit-of-plakar-and-the-streamchain-project%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=435"),!1'><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https%3a%2f%2fpoolp.org%2fposts%2f2022-10-18%2foctober-2022-blog-comments-a-bit-of-plakar-and-the-streamchain-project%2f" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1'><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.xing.com/spi/shares/new?url=https%3a%2f%2fpoolp.org%2fposts%2f2022-10-18%2foctober-2022-blog-comments-a-bit-of-plakar-and-the-streamchain-project%2f" onclick='return window.open(this.href,"xing-share","width=550,height=435"),!1'><i class="fab fa-xing"></i></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><div class="row post-top-meta"><div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right"><img class=author-thumb src=/images/me.jpg alt="Gilles Chehade / جيل شحادة"></div><div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left"><a target=_blank class=link-dark>Gilles Chehade / جيل شحادة</a><br><span class=author-description>foobarbaz-ing since 1981<br></span><br><span class=author-description><i class="far fa-star"></i>
Oct 18, 2022
<i class="far fa-clock clock"></i>
8 min read</span></div></div><div class=after-post-tags><ul class=tags></ul></div><h1 class=posttitle>October 2022: blog comments, a bit of plakar and the streamchain project</h1><b><a class="far fa-comment" href=#comments>go to comments</a></b><br><br></div><div class=article-post><blockquote><b>TL;DR:</b>
added comments support to the blog, did some music and hypnosis projects, fixed a few bugs in plakar and began a new toy project.</blockquote><center><img src=cover.png></center><h1 id=shout-out-to-my-sponsors-x2764xfe0f>Shout out to my sponsors ❤️</h1><p>A <strong>HUGE thanks</strong> goes to my sponsors on <a href=https://github.com/sponsors/poolpOrg>github</a>
and <a href=https://www.patreon.com/gilles>patreon</a>:
your continuous support is very much appreciated !</p><p>I created a Discord where I hang out and discuss my projects or screencast as I work on them.
Feel free to hop in if you want,
and feel free to do just like me and share thoughts as you work on your own projects there:
<strong>this is a virtual hack room for anyone to join</strong>: <a href=https://discord.gg/YC6j4rbvSk>https://discord.gg/YC6j4rbvSk</a></p><p>This is a fairly open server where you can ask random questions about a lot of topics,
not necessarily related to my own work.</p><h1 id=table-of-content>Table of content</h1><ul><li><a href=#learnt-myself-some-swift>Learnt myself some Swift</a></li><li><a href=#added-table-of-content-and-comments-support-to-the-blog>Added table of content and comments support to the blog</a></li><li><a href=#music-related-work>Music-related work</a></li><li><a href=#hypnosis-related-work>Hypnosis-related work</a></li><li><a href=#a-bit-of-plakar-work>A bit of plakar work</a></li><li><a href=#a-new-project-streamchain>A new project: Streamchain</a></li></ul><h1 id=learnt-myself-some-swift>Learnt myself some Swift</h1><p>Got myself a book on the Swift programming language,
spent a couple hours reading it and I really enjoyed it.</p><p>I was mostly curious,
I don&rsquo;t have anything I want to do with it at the moment,
but it seemed really nice as <strong>it kind of looks like a mix between C, Golang and Python</strong>,
taking bits I like from the three of them.</p><p>We&rsquo;ll see if something comes out of it for me in the future :-)</p><h1 id=added-table-of-content-and-comments-support-to-the-blog>Added table of content and comments support to the blog</h1><p>For the last few years,
this blog has used a static generator <strong>so that I could write the posts in Markdown and publish by committing to a repository</strong>.
This is nice because the website is standalone and I can easily move it around from machine to machine,
but <strong>it has prevented me from providing comments</strong> and I ended up relying on <a href=https://github.com/poolpOrg/poolp.org/discussions>Github discussions</a> and adding a link to the proper discussion below each article I write.</p><p>I do get feedback from people,
but <strong>at the exception of some articles that were referenced on popular websites</strong>,
these feedbacks tend to happen through other means like private messages on Twitter or discord.
Maybe these people wouldn&rsquo;t leave a comment on the blog if it was possible,
but maybe it&rsquo;s just because having to follow a link and comment elsewhere is not practical and does not keep the article available with a scroll.</p><p>So I found a nice javascript library that <strong>allows interfacing with the Github discussions API</strong>,
and now each article has&mldr; <a class="far fa-comment" href=#comments>its own comment section</a>.
It is now possible to comment directly at the bottom of each article,
the comments reflect what was discussed directly on Github and are published there.</p><p>While at it,
I figured it was possible to add a table of content to my articles so you can jump to specific sections.
<strong>I have not added it to previous articles</strong>,
though I might for some,
but <strong>from now on I&rsquo;ll make sure to always include one</strong> as I had lengthy articles in the past and it&rsquo;ll ease reading.</p><p>Feel free to comment this article and test :-)</p><h1 id=music-related-work>Music-related work</h1><p><strong>I enrolled in a course on music production</strong> that will start in March 2023 at a local studio in Nantes,
so I spent some time playing with Logic Pro X to be more familiar with it and not begin the course as a complete newbie with regard to tools.</p><p>These are four LoFi remixes I worked on by importing midi tracks,
altering instruments, scores and tempo,
and adding some effects.
Definitely not fantastic but I do like the result for some so I&rsquo;m sharing:</p><table><thead><tr><th style=text-align:center></th><th></th></tr></thead><tbody><tr><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/SmUXQqVCXz4 title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/sQCbIUBPpj8 title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td></tr><tr><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/6BshV_sLBCo title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/r5FZRrXknLw title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td></tr></tbody></table><p>Let me know if you like them,
I have created <a href="https://youtube.com/playlist?list=PLPkj9YHXkB0G9UbuT9SuEYvBQwJUL_3CU">a specific playlist</a> on <a href=https://www.youtube.com/c/GillesChehade>my youtube channel</a> for these experiments,
you can subscribe, comment and give thumbs up :-)</p><h1 id=hypnosis-related-work>Hypnosis-related work</h1><p>I haven&rsquo;t spent much time at the hypnosis office since I came back from holidays,
only performing a few sessions here and there,
mostly due to dedicating time to my son as he entered kindergarten and I need to adjust to his schedule.</p><p>So I decided to spend some time <strong>working on a podcast</strong> in French to explain how hypnosis works at low-level.
I have recorded the first three episodes of 8 and I intend to release roughly 1 per month,
with next episode due in late November or early December as I&rsquo;ll present a conference in November and won&rsquo;t have time to record.</p><table><thead><tr><th style=text-align:center></th><th></th></tr></thead><tbody><tr><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/r5zG-0J4h_c title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/-q-PsMYuNQo title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td></tr><tr><td style=text-align:center><center><iframe width=560 height=315 src=https://www.youtube.com/embed/GgybeD9mfF4 title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center></td><td style=text-align:center></td></tr></tbody></table><p>As a side-note,
I found it enjoyable to record so <strong>I might create a podcast related to computer stuff in the future</strong>,
when I&rsquo;m done with this one.</p><h1 id=a-bit-of-plakar-work>A bit of plakar work</h1><p>First,
<strong>I fixed a crash that happened when trying to list content of a path that consisted in a single directory and not starting with /</strong>.
Basically,
there is no such thing as a &ldquo;relative&rdquo; path in plakar as they are always relative to the snapshot and therefore to the root of a snapshot,
so <code>def:etc</code> is really <code>def:/etc</code> as far as plakar is concerned.
Because of how paths are handled,
by splitting pathnames into atoms and recreating a filesystem view,
this confused plakar about what was the root directory and caused it to crash.
<strong>I fixed the function that splits a snapshot path</strong> (ie: <code>&lt;snapshot>:&lt;pathname></code>) into prepending a slash to the pathname portion whenever there isn&rsquo;t,
which <strong>should not only fix the crash I observed but also all commands that accept snapshot paths</strong>.</p><p>Then,
I spotted a more annoying bug where <strong>restoring a snapshot results in a partial restore with missing files</strong>.
I was concerned at first because <strong>the last thing I want in a backup tool is for a snapshot to miss files</strong>,
however after a bit of testing I could verify that <strong>they weren&rsquo;t really missing as they could all be restored individually</strong>,
this pinpointed to a bug in the <code>pull</code> primitive which seems to miss some restorable files.
I spent several hours trying to understand the issue but couldn&rsquo;t figure out why it happens,
except that <strong>it happens mostly with snapshots containing a lot of files and when <code>pull</code> is parallelized</strong>.
It doesn&rsquo;t happen,
or at least I could not reproduce,
when working with a small snapshot or when <code>pull</code> is sequential.
<strong>I removed concurrency for the time being</strong> but this is not practical,
sequential restore of a large snapshot is dead slow,
I&rsquo;ll continue tracking the issue.</p><p><strong>I also removed the <code>gzip</code> support that I added in <code>plakar cat</code> around May</strong>,
and moved it to a dedicated <code>plakar gzcat</code> command.
Back then it seemed like a good idea to me that <code>plakar cat</code> transparently inflated compressed output at it allowed to <code>plakar cat</code> a compressed log,
but after some thinking <strong>I&rsquo;d rather provide that through a dedicated command</strong> as it allows using <code>plakar cat</code> to redirect a compressed stream to a file,
something that was no longer doable.</p><p>Finally,
<strong>I changed the way <code>plakar checksum</code> works and implemented a <code>-fast</code> option</strong>.
The command allows printing the sha256 checksum of a file contained in a snapshot,
and since I already had the checksum in the snapshot INDEX,
the command <strong>didn&rsquo;t recompute it but used the recorded checksum</strong> instead.
<strong>I changed it so that it recomputes the checksum by default</strong>,
reading the file chunk by chunk,
and only resorting to the recorded checksum when the <code>-fast</code> option is used.
In practice,
this should always produce the same result unless the plakar store has corrupted chunks.</p><p>And that&rsquo;s all for plakar !</p><h1 id=a-new-project-streamchain>A new project: streamchain</h1><p>So this is a TOY project,
nothing serious,
I&rsquo;m just <strong>experimenting with an idea</strong>.</p><p>Basically,
<strong>I wrote a tool which lets me create a &ldquo;twitter-like&rdquo; stream</strong> where I can post short messages,
however <strong>instead of being centralized on a server</strong> they are <strong>stored in a standalone structured file</strong>.</p><p>The file is structured in a way that allows verifying both <strong>authenticity and integrity</strong>,
but also allows for <strong>fast random access</strong> to any message <strong>without having to read the entire file</strong>.
A streamchain reader can validate that the streamchain file <strong>originates from its owner</strong>,
it can validate that it <strong>has not been tampered with</strong>,
and can <strong>seek to any message in constant time</strong> regardless of the streamchain size.</p><p>As a result,
it can be hosted anywhere from an s3 object storage to a static web server,
and if the storage supports range queries,
like pretty much all HTTP servers&mldr; then all the better.
A streamchain client reader that can talk HTTP can <strong>either mirror a streamchain locally and perform range queries to synchronize updates</strong>,
or it can <strong>consume the streamchain remotely without downloading it entirely</strong>.</p><p>I have a working PoC but I&rsquo;m not ready to publish the code yet,
so I&rsquo;ll likely write an article about it when I open the repository publically.</p><h1 id=whats-next->What&rsquo;s next ?</h1><p>A conference on hypnosis for psychology students in November,
so probably not much happening in the next two weeks as I prepare for it.</p><p>Then,
I&rsquo;ll try to get streamchain in shape to open the repository.</p><p>Feel free to <a href=https://discord.gg/YC6j4rbvSk>join my discord</a>,
engage on <a href=https://twitter.com/poolpOrg>twitter</a> or
support me on <a href=https://github.com/sponsors/poolpOrg>github</a> or/and <a href=https://www.patreon.com/gilles>patreon</a>.</p><p>Take care,
stay tuned,
I&rsquo;ll post as soon as I resume my work !</p></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="d-block col-md-6 text-lg-right" href=https://poolp.org/posts/2022-06-14/june-2022-go-harmony-and-earmuff/>June 2022: go-harmony and earmuff &#187;</a><div class=clearfix></div></div></div></div></div><div class=container><div id=comments class="row justify-content-center mb-5"><div class=col-md-8><script src=https://giscus.app/client.js data-repo=poolpOrg/poolp.org data-repo-id="MDEwOlJlcG9zaXRvcnkxMjYxODk2MjA=" data-category=Articles data-category-id=DIC_kwDOB4WANM4B-Zf1 data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></div></div></div><div class=alertbar><div class="container text-center"><span><img src=/images/poolp_org.png alt=logo height=0px>
Consider tipping me on <a href=https://paypal.me/poolpOrg>PayPal</a>,
supporting me through <a href=https://github.com/sponsors/poolpOrg>Github</a>,
<a href=https://patreon.com/gilles>Patreon</a> or
<a href=https://liberapay.com/poolpOrg>LiberaPay</a>,
or getting me something from <a href=http://amzn.eu/3MwH6CX>Amazon</a> for positive <a href=https://en.wikipedia.org/wiki/Reinforcement>reinforcement</a> :-)</span></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">&copy; Copyright poolp.org - All rights reserved</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank rel=noopener href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script src=https://code.jquery.com/jquery-3.4.1.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js integrity=sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script>
<script src=/js/mediumish.js></script></body></html>