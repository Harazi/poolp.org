<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Posts - poolp.org</title><meta property="og:title" content="Posts"><meta name=twitter:title content="Posts"><meta name=author content="Gilles Chehade"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"poolp.org","url":"https:\/\/poolp.org\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/poolp.org\/"}</script><meta property="og:title" content="Posts"><meta property="og:url" content="https://poolp.org/posts/"><meta property="og:type" content="website"><meta property="og:site_name" content="poolp.org"><meta name=twitter:title content="Posts"><meta name=twitter:card content="summary"><meta name=twitter:site content="@poolpOrg"><meta name=twitter:creator content="@poolpOrg"><meta name=twitter:card content="summary"><meta name=twitter:site content="@poolpOrg"><meta name=twitter:creator content="@poolpOrg"><meta property="og:url" content="https://poolp.org/posts/"><meta property="og:type" content="website"><meta property="og:site_name" content="poolp.org"><meta name=generator content="Hugo 0.79.1"><link rel=alternate href=https://poolp.org/index.xml type=application/rss+xml title=poolp.org><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://poolp.org/css/main.css><link rel=stylesheet href=https://poolp.org/css/highlight.min.css><link rel=stylesheet href=https://poolp.org/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><link rel=stylesheet href=/css/latex.style.css></head><body><div class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://poolp.org/ target=_blank><img src=/images/poolp_org.png alt=poolp.org height=55px></a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li class=navlinks-container><a class=navlinks-parent>Freelance</a><div class=navlinks-children><a href=/en/contracting/>[en] Hire me !</a>
<a href=/fr/contracting/>[fr] Recrutez moi !</a></div></li><li class=navlinks-container><a class=navlinks-parent>Sponsorship</a><div class=navlinks-children><a href=/en/sponsorship/>[en] Sponsor me !</a>
<a href=/fr/sponsorship/>[fr] Sponsorisez moi !</a></div></li><li class=navlinks-container><a class=navlinks-parent>Social</a><div class=navlinks-children><a href=https://patreon.com/gilles>Patreon</a>
<a href=https://www.linkedin.com/in/gilleschehade>LinkedIn</a>
<a href=https://github.com/poolpOrg>Github</a>
<a href=https://twitter.com/poolpOrg>Twitter</a></div></li><li class=navlinks-container><a class=navlinks-parent>Curriculum</a><div class=navlinks-children><a href=https://github.com/poolpOrg/resume/blob/master/resume.en.pdf>EN</a>
<a href=https://github.com/poolpOrg/resume/blob/master/resume.fr.pdf>FR</a></div></li><li><a title=Hypnose href=https://hypno.cat>Hypnose</a></li></ul></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=posts-heading><h1 style=text-align:left>Posts</h1></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=posts-list><article class=post-preview><a href=https://poolp.org/posts/2018-11-03/opensmtpd-released-and-upcoming-filters-preview/><h2 class=post-title>OpenSMTPD released and upcoming filters preview</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;11&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;2246&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: Filters have been a (the most ?) long awaited feature in OpenSMTPD. I finally committed most of the filters code to OpenBSD. There is still a bit of work required but the trickiest parts are done. This article describes how filters are implemented and what to expect. OpenSMTPD 6.4.0 was released ! We have released OpenSMTPD 6.4.0 last week without filters.
I won&rsquo;t expand on the features in the 6.
<a href=https://poolp.org/posts/2018-11-03/opensmtpd-released-and-upcoming-filters-preview/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-05-21/switching-to-opensmtpd-new-config/><h2 class=post-title>switching to OpenSMTPD new config</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;9&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1759&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: Switching to new config is not too hard and can be done in minutes. The new config is also a new queue that is not backwards compatible. The easiest way is to flush the mail queue before switching. We came up with a solution to help maintainers of more complex setups. Switching from old config to new config The new OpenSMTPD configuration grammar is slightly different from the current one, rules are no longer stated as single lines, but the conversion from previous ruleset to new ruleset isn&rsquo;t that hard.
<a href=https://poolp.org/posts/2018-05-21/switching-to-opensmtpd-new-config/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-04-30/opensmtpd-new-config/><h2 class=post-title>OpenSMTPD new config</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;8&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1509&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: OpenBSD #p2k18 hackathon took place at Epitech in Nantes. I was organizing the hackathon but managed to make progress on OpenSMTPD. As mentionned at EuroBSDCon the one-line per rule config format was a design error. A new configuration grammar is almost ready and the underlying structures are simplified. Refactor removes ~750 lines of code and solves _many_ issues that were side-effects of the design error. New features are going to be unlocked thanks to this.
<a href=https://poolp.org/posts/2018-04-30/opensmtpd-new-config/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-01-29/install-openbsd-on-dedibox-with-full-disk-encryption/><h2 class=post-title>Install OpenBSD on dedibox with full-disk encryption</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;11&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;2296&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: I run several "dedibox" servers at online.net, all powered by OpenBSD. OpenBSD is not officially supported so you have to work-around. Running full-disk encrypted OpenBSD there is a piece of cake. As a bonus, my first steps within a brand new booted machine ;-) Step #0: choosing your server OpenBSD is not officially supported, I can&rsquo;t guarantee that this will work for you on any kind of server online.
<a href=https://poolp.org/posts/2018-01-29/install-openbsd-on-dedibox-with-full-disk-encryption/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-01-08/spfwalk/><h2 class=post-title>spfwalk</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;950&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: deraadt@ thought it would be nice to have a spf fetch utility in base. Aaron Poffenberger wrote a shell-based `spf_fetch` utility. I wrote a C-based `spfwalk` utility that's `pledge()`-ed. The `spfwalk` utility got merged to `smtpctl`. What&rsquo;s SPF in a few words SPF is the Sender Policy Framework, a standard to verify the domain name of an e-mail sender.
Long story short, the SMTP protocol does not come with a way to authenticate a domain and, during an SMTP session, nothing really prevents a sender from pretending to come from any domain:
<a href=https://poolp.org/posts/2018-01-08/spfwalk/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2018-01-08/news-from-the-front/><h2 class=post-title>News from the front !</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;277&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: Came very close to a burn out late 2016, had to quit former employer. Started working at another company early 2017. Became a student again, currently halfway through second year in psychology. Haven't done much opensource since early 2017, slowly resuming. Happy new year ! I wish you a very happy new year 2018 and hope that you succeed in whatever you attempt.
It feels odd to write again to this blog considering the last blog post dates from September 2016, over a year ago.
<a href=https://poolp.org/posts/2018-01-08/news-from-the-front/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2016-09-12/opensmtpd-6.0.0-is-released/><h2 class=post-title>OpenSMTPD 6.0.0 is released !</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;7&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1400&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: We just released OpenSMTPD 6.0.0 and it's quite different from former releases. Turns out most of the changes are not visible. A featureless release I managed to wrap the 6.0.0 release yesterday.
Unlike most of our releases, it comes out with almost no new feature.
The changelog fits in less than 10 lines as follows:
- new fork+reexec model so each process has its own randomized memory space - logging format has been reworked - a "multi-line response" bug in the LMTP delivery backend has been fixed - connections concurrency limits have been bumped - artificial delaying in remote sessions have been reduced - dhparams option has been removed - dhe option has been added, supporting auto and legacy modes - smtp engine has been simplified - various cosmethic changes, code cleanup and documentation improvement Seems like a very productive slacking, however some of these changes turn out to be very interesting in terms of code simplification and security.
<a href=https://poolp.org/posts/2016-09-12/opensmtpd-6.0.0-is-released/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2015-12-22/home-sweet-home/><h2 class=post-title>Home, sweet home</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;6&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1242&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: OpenSMTPD on github no longer diverges from OpenBSD. Since last episode Sometime this year, we released OpenSMTPD 5.7.1 which was the first version that shipped with the long-awaited experimental filters support. The result of over a year and a half of very very deep refactor in our IO layer and the addition of a very elegant but also very tricky new API.
This refactor took place outside the OpenBSD tree because it required breaking a lot of code for extended period of times, which spanned over 3 OpenBSD releases.
<a href=https://poolp.org/posts/2015-12-22/home-sweet-home/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2014-12-12/the-state-of-filters/><h2 class=post-title>The state of filters</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;16&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;3203&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>TL;DR: yeeeees, filters are coming. don't believe us ? here's an example. be patient. On my death bed On my death bed, when my life flashes before my eyes and I start recalling what people have told me during my (hopefully long) lifetime, these sentences will single out:
&ldquo;When will OpenSMTPD support filters ? I need it.&rdquo;
Not that it carries a philosophical meaning that will have taken me a lifetime of thinking, but because for the last three years I have been hearing this every time I met someone IRL and discussed OpenSMTPD, I have read it on our Github issues tracker, on GTalk, on IRC, on Twitter, on Facebook, on random forums, and just this week three times in my mailbox.
<a href=https://poolp.org/posts/2014-12-12/the-state-of-filters/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://poolp.org/posts/2014-12-10/some-opensmtpd-overview-part-3/><h2 class=post-title>Some OpenSMTPD overview, part 3</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;12&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;2344&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Gilles Chehade</span></p><div class=post-entry>EHLO,
This is the third post of a series about OpenSMTPD improvements that have taken place since this summer.
Content altering For a long time, we have developed OpenSMTPD with a strict rule that the daemon should not alter DATA (as in the DATA SMTP phase) in any way.
The rationale was that by enforcing that rule, the message writing was simplified as the smtp process would simply read data from a client and write it, without any post-processing, to a file descriptor.
<a href=https://poolp.org/posts/2014-12-10/some-opensmtpd-overview-part-3/ class=post-read-more>[Read More]</a></div></article></div><ul class="pager main-pager"><li class=previous><a href=https://poolp.org/posts/page/3/>&larr; Newer Posts</a></li><li class=next><a href=https://poolp.org/posts/page/5/>Older Posts &rarr;</a></li></ul></div></div></div><footer style=text-align:justify><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><h2>Like my work and want to help me ?</h2><br><ul><li>Consider <b>tipping me</b> on <b><a target=_blank href=https://paypal.me/poolpOrg>PayPal</a></b>,
<b>supporting me</b> through one of the <b><a href=/en/sponsorship>sponsorship</a></b> platforms at <b><a href=https://github.com/sponsors/poolpOrg>Github</a></b>, <b><a href=https://patreon.com/gilles>Patreon</a></b> or
<b><a href=https://liberapay.com/poolpOrg>LiberaPay</a></b>,
or even <b>getting me something</b> from my wishlist on <b><a target=_blank href=http://amzn.eu/3MwH6CX>Amazon</a></b>
for positive <b><a href=https://en.wikipedia.org/wiki/Reinforcement>reinforcement</a></b> :-)<br><br></li><li>You can also help me by <b>commenting articles</b> to spark discussions,
and by <b>sharing them</b> so they reach a bigger audience,
they all contain a comment link and icons that will let you share to popular social networks.</li></ul><br></div></div><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="credits copyright text-muted"><a href=https://poolp.org>Gilles Chehade</a>
-&nbsp;&copy;
2020
-
<a href=https://poolp.org/>poolp.org</a></p><p class="credits theme-by text-muted"><a href=http://gohugo.io>Hugo v0.79.1</a> powered - Theme adapted from <a href=http://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://poolp.org/js/main.js></script><script src=https://poolp.org/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0");});</script><script>renderMathInElement(document.body);</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://poolp.org/js/load-photoswipe.js></script></body></html>