<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><link rel=icon href=/images/poolp_org.png><title>March 2021: backups with Plakar | poolp.org</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://poolp.org/posts/2021-03-26/march-2021-backups-with-plakar/cover.png"><meta name=twitter:title content="March 2021: backups with Plakar"><meta name=twitter:description content="TL;DR: I wrote a backup utility called plakar.  Shout outs to my patrons ! As usual, a huge thanks goes to the people sponsoring me on patreon, github or liberaPay, the work in this post was made possible by my sponsorship.
Let&rsquo;s start with some LoFi Relax.
   I have a youtube channel (subscribe ! now !)
Plakar: Yet another backup utility ? Yes, I wrote another backup utility."><meta property="og:title" content="March 2021: backups with Plakar"><meta property="og:description" content="TL;DR: I wrote a backup utility called plakar.  Shout outs to my patrons ! As usual, a huge thanks goes to the people sponsoring me on patreon, github or liberaPay, the work in this post was made possible by my sponsorship.
Let&rsquo;s start with some LoFi Relax.
   I have a youtube channel (subscribe ! now !)
Plakar: Yet another backup utility ? Yes, I wrote another backup utility."><meta property="og:type" content="article"><meta property="og:url" content="https://poolp.org/posts/2021-03-26/march-2021-backups-with-plakar/"><meta property="og:image" content="https://poolp.org/posts/2021-03-26/march-2021-backups-with-plakar/cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-26T16:52:00+02:00"><meta property="article:modified_time" content="2021-03-26T16:52:00+02:00"><link href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css rel=stylesheet integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.0.13/css/all.css integrity=sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link href=/css/medium.css rel=stylesheet><link href=/css/additional.css rel=stylesheet><link href=/css/custom.css rel=stylesheet></head><body><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href=https://poolp.org//><img src=/images/poolp_org.png alt=logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/posts>Articles</a></li><li class=nav-item><a class=nav-link href=/fr/contracting/>Freelance</a></li><li class=nav-item><a class=nav-link href=https://hypno.cat>Hypnose</a></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset"><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=March%202021%3a%20backups%20with%20Plakar&url=https%3a%2f%2fpoolp.org%2fposts%2f2021-03-26%2fmarch-2021-backups-with-plakar%2f" onclick="return window.open(this.href,'twitter-share','width=550,height=435'),!1"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https%3a%2f%2fpoolp.org%2fposts%2f2021-03-26%2fmarch-2021-backups-with-plakar%2f" onclick="return window.open(this.href,'facebook-share','width=550,height=435'),!1"><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.xing.com/spi/shares/new?url=https%3a%2f%2fpoolp.org%2fposts%2f2021-03-26%2fmarch-2021-backups-with-plakar%2f" onclick="return window.open(this.href,'xing-share','width=550,height=435'),!1"><i class="fab fa-xing"></i></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><div class="row post-top-meta"><div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right"><img class=author-thumb src=/images/me.jpg alt="Gilles Chehade"></div><div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left"><a target=_blank class=link-dark>Gilles Chehade</a><br><span class=author-description><br><i class="far fa-star"></i>
Mar 26, 2021
<i class="far fa-clock clock"></i>
21 min read</span></div></div><h1 class=posttitle>March 2021: backups with Plakar</h1></div><img class="featured-image img-fluid" src=https://poolp.org/posts/2021-03-26/march-2021-backups-with-plakar/cover.png alt="thumbnail for this post"><div class=article-post><blockquote><b>TL;DR:</b>
I wrote a backup utility called plakar.</blockquote><h1 id=shout-outs-to-my-patrons->Shout outs to my patrons !</h1><p>As usual, a <strong>huge</strong> thanks goes to the people <strong>sponsoring me</strong> on <strong><a href=https://www.patreon.com/gilles>patreon</a></strong>,
<strong><a href=https://github.com/sponsors/poolpOrg>github</a></strong> or <strong><a href=https://liberapay.com/poolpOrg>liberaPay</a></strong>,
the work in this post was made possible by my <strong><a href=/sponsorship/>sponsorship</a></strong>.</p><h1 id=lets-start-with-some-lofi>Let&rsquo;s start with some LoFi</h1><p>Relax.</p><center><iframe width=560 height=315 src=https://www.youtube.com/embed/3t0dxu6FkXk title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center><p>I have a <a href=https://www.youtube.com/c/GillesChehade>youtube channel</a> (subscribe ! now !)</p><h1 id=plakar-yet-another-backup-utility->Plakar: Yet another backup utility ?</h1><p>Yes, I wrote another backup utility.</p><p>I backup many hosts on a daily basis and while there are many different tools,
I always fallback to using scripts built on top of <code>rsync</code> to do incremental backups,
which <strong>always results in customization</strong> for this or that host.</p><p>I want backups that are <strong>easy to perform and restore</strong>,
that <strong>do not require me to remember a ton of options</strong>,
that lets me work with snapshots <strong>independant one of another</strong> instead of increments,
that allow me to <strong>browse the content easily</strong> and <strong>compare snapshots</strong> without restoring them,
that <strong>store data efficiently</strong> (compressed and deduped),
and finally that lets me back things up locally or remotely to machines I own.</p><p>I&rsquo;ve looked into various solutions and I figured that the best option <strong>for me</strong> was to write a tool that did exactly what I wanted.
Also, it&rsquo;s fun to write code.</p><h1 id=what-is-plakar->What is <code>plakar</code> ?</h1><p>The <code>plakar</code> utility is a tool that performs backups as <strong>snapshots of a tree structure</strong>,
scanning subdirectories and files,
and storing them efficiently in a repository while deduplicating redundant data.
Once a snapshot has been taken of a directory,
it can be inspected and restored at will.</p><center><img src=/images/2021-03-01-plakar.png></center><h1 id=how-does-it-work->How does it work ?</h1><p>To perform a backup,
you only need to call <code>plakar</code> with the <code>push</code> subcommand and a set of directories that should be part of the snapshot.
This will cause <code>plakar</code> to scan the directories,
collect inode information regarding every subdirectory and files,
split files into chunks and <strong>push them to the repository</strong>.</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar push /bin
82711aee-6485-445b-98f4-6cae51c83035: OK
$
</code></pre></div><p>The <code>ls</code> subcommand allows <strong>listing snapshots</strong> present in the repository:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar ls
82711aee-6485-445b-98f4-6cae51c83035 <span class=o>[</span>2021-03-27T22:05:00Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
$
</code></pre></div><p>The <code>pull</code> subcommand allows <strong>restoring a particular snapshot</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar pull 82711aee-6485-445b-98f4-6cae51c83035
82711aee-6485-445b-98f4-6cae51c83035: OK

$ ls -l bin
total <span class=m>9336</span>
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>121104</span>  <span class=m>1</span> Jan  <span class=m>2020</span> <span class=o>[</span>
-r-xr-xr-x  <span class=m>1</span> root  wheel  <span class=m>1296640</span>  <span class=m>1</span> Jan  <span class=m>2020</span> bash
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>121968</span>  <span class=m>1</span> Jan  <span class=m>2020</span> cat
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>107552</span>  <span class=m>1</span> Jan  <span class=m>2020</span> chmod
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>123232</span>  <span class=m>1</span> Jan  <span class=m>2020</span> cp
-rwxr-xr-x  <span class=m>1</span> root  wheel  <span class=m>1104640</span>  <span class=m>1</span> Jan  <span class=m>2020</span> csh
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>277408</span>  <span class=m>1</span> Jan  <span class=m>2020</span> dash
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>139264</span>  <span class=m>1</span> Jan  <span class=m>2020</span> date
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>122160</span>  <span class=m>1</span> Jan  <span class=m>2020</span> dd
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>121840</span>  <span class=m>1</span> Jan  <span class=m>2020</span> df
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120848</span>  <span class=m>1</span> Jan  <span class=m>2020</span> <span class=nb>echo</span>
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>205648</span>  <span class=m>1</span> Jan  <span class=m>2020</span> ed
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>121504</span>  <span class=m>1</span> Jan  <span class=m>2020</span> expr
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120864</span>  <span class=m>1</span> Jan  <span class=m>2020</span> hostname
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>121232</span>  <span class=m>1</span> Jan  <span class=m>2020</span> <span class=nb>kill</span>
-r-xr-xr-x  <span class=m>1</span> root  wheel  <span class=m>2552352</span>  <span class=m>1</span> Jan  <span class=m>2020</span> ksh
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>329344</span>  <span class=m>1</span> Jan  <span class=m>2020</span> launchctl
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>105136</span>  <span class=m>1</span> Jan  <span class=m>2020</span> link
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>105136</span>  <span class=m>1</span> Jan  <span class=m>2020</span> ln
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>157360</span>  <span class=m>1</span> Jan  <span class=m>2020</span> ls
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>104752</span>  <span class=m>1</span> Jan  <span class=m>2020</span> mkdir
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>106176</span>  <span class=m>1</span> Jan  <span class=m>2020</span> mv
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>291152</span>  <span class=m>1</span> Jan  <span class=m>2020</span> pax
-rwsr-xr-x  <span class=m>1</span> root  wheel   <span class=m>173568</span>  <span class=m>1</span> Jan  <span class=m>2020</span> ps
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120832</span>  <span class=m>1</span> Jan  <span class=m>2020</span> <span class=nb>pwd</span>
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>106000</span>  <span class=m>1</span> Jan  <span class=m>2020</span> rm
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>104368</span>  <span class=m>1</span> Jan  <span class=m>2020</span> rmdir
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120912</span>  <span class=m>1</span> Jan  <span class=m>2020</span> sh
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120784</span>  <span class=m>1</span> Jan  <span class=m>2020</span> sleep
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>138656</span>  <span class=m>1</span> Jan  <span class=m>2020</span> stty
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120464</span>  <span class=m>1</span> Jan  <span class=m>2020</span> sync
-rwxr-xr-x  <span class=m>1</span> root  wheel  <span class=m>1104640</span>  <span class=m>1</span> Jan  <span class=m>2020</span> tcsh
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>121104</span>  <span class=m>1</span> Jan  <span class=m>2020</span> <span class=nb>test</span>
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>106000</span>  <span class=m>1</span> Jan  <span class=m>2020</span> unlink
-rwxr-xr-x  <span class=m>1</span> root  wheel   <span class=m>120752</span>  <span class=m>1</span> Jan  <span class=m>2020</span> wait4path
-rwxr-xr-x  <span class=m>1</span> root  wheel  <span class=m>1331248</span>  <span class=m>1</span> Jan  <span class=m>2020</span> zsh
$ 
</code></pre></div><h1 id=compression-and-deduplication>Compression and deduplication</h1><p>When <code>plakar</code> performs a snapshot,
it <strong>splits every file into content-defined chunks</strong> and <strong>checks if they are available</strong> in the repository before pushing them,
in a way similar to what <code>rsync</code> does.</p><p>Each chunk is <strong>compressed</strong> before being written to the repository,
so that between compression and deduplication,
<strong>a saved snapshot may take less space than the original directory</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ du -sh /bin
4.6M    /bin

$ du -sh ~/.plakar
3.8M    /Users/gilles/.plakar
</code></pre></div><p>Furthermore,
since this deduplication takes place globally in the repository,
pushing multiple times the same content doesn&rsquo;t cause the plakar to grow much as <strong>it only grows by the size of the snapshot index</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar push /bin
f2645591-4b06-4512-89e2-dae8ad1e2360: OK

$ plakar push /bin
c0aa514b-452f-4122-a53f-99e984cb0548: OK

$ plakar push /bin
3630358c-c634-4ad9-960d-f864d1eb56f5: OK

$ plakar push /bin
e521e447-5c2a-429f-b637-41561daa3826: OK

$ plakar push /bin
a83fe7bb-341f-4cf1-bad6-c2b1933422f8: OK

$ plakar ls
82711aee-6485-445b-98f4-6cae51c83035 <span class=o>[</span>2021-03-27T22:05:00Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
f2645591-4b06-4512-89e2-dae8ad1e2360 <span class=o>[</span>2021-03-27T22:06:17Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
c0aa514b-452f-4122-a53f-99e984cb0548 <span class=o>[</span>2021-03-27T22:06:17Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
3630358c-c634-4ad9-960d-f864d1eb56f5 <span class=o>[</span>2021-03-27T22:06:18Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
e521e447-5c2a-429f-b637-41561daa3826 <span class=o>[</span>2021-03-27T22:06:18Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
a83fe7bb-341f-4cf1-bad6-c2b1933422f8 <span class=o>[</span>2021-03-27T22:06:19Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>

$ du -sh ~/.plakar
3.8M    /Users/gilles/.plakar
</code></pre></div><h1 id=snapshots-uuid-prefix-based-lookup>Snapshots UUID prefix-based lookup</h1><p>Because using an UUID as parameter to subcommands is painful,
<code>plakar</code> performs <strong>prefix-based lookup</strong> and allows using the beginning of an UUID as long as <strong>it is not ambiguous</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar pull <span class=m>3</span>
3630358c-c634-4ad9-960d-f864d1eb56f5: OK
</code></pre></div><p>In case of ambiguity,
it warns so that a less ambiguous prefix can be provided:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar ls<span class=p>|</span>grep ^4
45de4fd3-d177-4378-84cb-077b2ef297fb <span class=o>[</span>2021-03-27T23:09:11Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>
4c467893-f959-43cb-858f-c50b8c46a86d <span class=o>[</span>2021-03-27T23:17:05Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>10</span> MB, files: 36, dirs: 1<span class=o>)</span>

$ plakar pull <span class=m>4</span>
2021/03/28 00:17:15 plakar: snapshot ID is ambigous: <span class=m>4</span> <span class=o>(</span>matches <span class=m>2</span> snapshots<span class=o>)</span>

$ plakar pull <span class=m>45</span>
45de4fd3-d177-4378-84cb-077b2ef297fb: OK
</code></pre></div><h1 id=snapshots-health-check>Snapshots health check</h1><p>Backups are not useful <strong>if they can&rsquo;t be restored</strong>,
but it&rsquo;s also painful to create a backup and <strong>try restoring just to know if it would work</strong>.
To cope with this,
<code>plakar</code> supports health checking snapshots without actually restoring them:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar check <span class=m>3</span>
3630358c-c634-4ad9-960d-f864d1eb56f5: OK
</code></pre></div><p>What it does is that <strong>it fetches the snapshot index</strong>,
checks that <strong>everything referenced in the snapshot exists</strong> in the repository,
and does <strong>a few sanity checks</strong> to verify if <strong>it could restore the entirety of the snapshot</strong> if requested.</p><h1 id=snapshots-restoration>Snapshots restoration</h1><p>As shown in the example above,
restoring a snapshot is <strong>as simple as typing</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar pull <span class=m>3</span>
3630358c-c634-4ad9-960d-f864d1eb56f5: OK
</code></pre></div><p>But this performs a full snapshot restore,
whereas sometimes what you really want is a <strong>partial restore</strong>.
For this,
<code>plakar</code> supports <strong>providing a path within a snapshot</strong> pointing either <strong>to a subdirectory or to a file</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar pull 3:/bin/ls
3630358c-c634-4ad9-960d-f864d1eb56f5:/bin/ls: OK

$ ls -l bin     
total <span class=m>312</span>
-rwxr-xr-x  <span class=m>1</span> gilles  staff  <span class=m>157360</span> <span class=m>27</span> Mar 23:18 ls
</code></pre></div><p>While doing the restore,
<code>plakar</code> will <strong>check every chunk</strong> and their checksums to <strong>detect any corruption</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ rm -rf ~/.plakar/default/chunks/00/008d4087e3e99c8f8c2c1ad76e9c6bc3d614e580e30ed45da06f93f912995538 

$ plakar pull <span class=m>3</span>
/bin/ksh: missing chunk 008d4087e3e99c8f8c2c1ad76e9c6bc3d614e580e30ed45da06f93f912995538
/bin/ksh: corrupt file: checksum mismatch
3630358c-c634-4ad9-960d-f864d1eb56f5: KO

$ ls -l bin
total <span class=m>19504</span>
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>121104</span> <span class=m>27</span> Mar 23:22 <span class=o>[</span>
-r-xr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>743708</span> <span class=m>27</span> Mar 23:22 bash
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>121968</span> <span class=m>27</span> Mar 23:22 cat
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>107552</span> <span class=m>27</span> Mar 23:22 chmod
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>123232</span> <span class=m>27</span> Mar 23:22 cp
-rwxr-xr-x  <span class=m>1</span> gilles  staff  <span class=m>1104640</span> <span class=m>27</span> Mar 23:22 csh
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>277408</span> <span class=m>27</span> Mar 23:22 dash
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>139264</span> <span class=m>27</span> Mar 23:22 date
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>122160</span> <span class=m>27</span> Mar 23:22 dd
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>121840</span> <span class=m>27</span> Mar 23:22 df
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120848</span> <span class=m>27</span> Mar 23:22 <span class=nb>echo</span>
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>205648</span> <span class=m>27</span> Mar 23:22 ed
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>121504</span> <span class=m>27</span> Mar 23:22 expr
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120864</span> <span class=m>27</span> Mar 23:22 hostname
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>121232</span> <span class=m>27</span> Mar 23:22 <span class=nb>kill</span>
-r-xr-xr-x  <span class=m>1</span> gilles  staff  <span class=m>1258618</span> <span class=m>27</span> Mar 23:22 ksh
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>329344</span> <span class=m>27</span> Mar 23:22 launchctl
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>105136</span> <span class=m>27</span> Mar 23:22 link
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>105136</span> <span class=m>27</span> Mar 23:22 ln
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>157360</span> <span class=m>27</span> Mar 23:22 ls
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>104752</span> <span class=m>27</span> Mar 23:22 mkdir
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>106176</span> <span class=m>27</span> Mar 23:22 mv
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>291152</span> <span class=m>27</span> Mar 23:22 pax
-rwsr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>173568</span> <span class=m>27</span> Mar 23:22 ps
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120832</span> <span class=m>27</span> Mar 23:22 <span class=nb>pwd</span>
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>106000</span> <span class=m>27</span> Mar 23:22 rm
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>104368</span> <span class=m>27</span> Mar 23:22 rmdir
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120912</span> <span class=m>27</span> Mar 23:22 sh
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120784</span> <span class=m>27</span> Mar 23:22 sleep
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>138656</span> <span class=m>27</span> Mar 23:22 stty
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120464</span> <span class=m>27</span> Mar 23:22 sync
-rwxr-xr-x  <span class=m>1</span> gilles  staff  <span class=m>1104640</span> <span class=m>27</span> Mar 23:22 tcsh
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>121104</span> <span class=m>27</span> Mar 23:22 <span class=nb>test</span>
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>106000</span> <span class=m>27</span> Mar 23:22 unlink
-rwxr-xr-x  <span class=m>1</span> gilles  staff   <span class=m>120752</span> <span class=m>27</span> Mar 23:22 wait4path
-rwxr-xr-x  <span class=m>1</span> gilles  staff  <span class=m>1331248</span> <span class=m>27</span> Mar 23:22 zsh
</code></pre></div><p>The snapshot is still restored as a <em>&ldquo;best effort&rdquo;</em>,
but here a warning informs that <code>ksh</code> is <strong>not the same as the one that was initially backed up</strong>.
This is <strong>not supposed to happen in practice</strong> as long as I don&rsquo;t fiddle with the repository,
but it is a nice sanity check.</p><p>One that <strong>would be caught</strong> by <code>plakar check</code>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar check <span class=m>3</span>
3630358c-c634-4ad9-960d-f864d1eb56f5: KO
</code></pre></div><h1 id=other-plakar-subcommands>Other <code>plakar</code> subcommands</h1><p>In addition to <code>pull</code>, <code>push</code>, <code>ls</code> and <code>check</code>,
<code>plakar</code> supports various other subcommands.</p><p>They are more interesting when playing with text files,
so let&rsquo;s push <code>/private/etc</code>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar push /private/etc
open /private/etc/krb5.keytab: permission denied
open /private/etc/aliases.db: permission denied
open /private/etc/racoon/psk.txt: permission denied
open /private/etc/security/audit_user: permission denied
open /private/etc/security/audit_control: permission denied
open /private/etc/sudoers: permission denied
open /private/etc/sudo_lecture: permission denied
open /private/etc/master.passwd: permission denied
open /private/etc/openldap/slapd.conf.default: permission denied
open /private/etc/openldap/DB_CONFIG.example: permission denied
98b6658b-a975-47c4-a38f-f958d8d7359f: OK
</code></pre></div><p>Here <code>plakar</code> has warned about <strong>files that couldn&rsquo;t make it into the snapshot</strong>,
but lets inspect <strong>what files are part of the snapshot</strong> with <code>ls</code>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar ls 9:/
acc57694b78a1ea669535547ac310e7682f141b75f6ba23658078b9000dbd9ac -rw-r--r--     root    wheel    <span class=m>20</span> kB /private/etc/php-fpm.d/www.conf.default
a4dda57401575878b78c5b0bc4a6bc020675d7f285dc8a836d07f1fda0938715 -rw-r--r--     root    wheel    <span class=m>12</span> kB /private/etc/postfix/LICENSE
863f779b43680f81799688e91c18a164047a1a8e9dfff650881e50ba35530ed1 -r--r--r--     root    wheel    <span class=m>141</span> B /private/etc/uucp/port
75a3d05049424cc17623d04c5d84038ca703ae673ad4c1bcf62d8293462d90b0 -rw-r--r--     root    wheel    <span class=m>152</span> B /private/etc/pam.d/login.term
591161270b2fbe74d7f1b96625c4b60551f33eb6fa28992c8ccc71dff9b7c70b -rw-r--r--     root    wheel   6.2 kB /private/etc/postfix/master.cf.proto
056514aa4105c96e0aad6a144d76f63461db7157123d43fa7c4121297a6c9200 -rw-r--r--     root    wheel    <span class=m>190</span> B /private/etc/asl/com.apple.authd
05f4215652c68201fd6aee81fc4eeaee4d5c395f3f4a3a155b986cb06ca0f768 -rw-r--r--     root    wheel    <span class=m>216</span> B /private/etc/asl/com.apple.cdscheduler
3c4aaff1783756368c28022658ebb238d6f9f32beeb0d04d79962654e0a0ae26 -rw-r--r--     root    wheel   3.3 kB /private/etc/ssh/sshd_config
23198c58755cd991531259cd290f62ea99cd9596595001ab303a15306fd03ec1 -rw-r--r--     root    wheel    <span class=m>127</span> B /private/etc/pam.d/authorization_ctk
48edf5460c6ad64cc681209902d2cfef856f4b68400e34cac41ec6704f45b580 -rwxr-xr-x     root    wheel    <span class=m>687</span> B /private/etc/periodic/daily/430.status-rwho
c998ee1b26049571ed20dc89e7dd9d3e87e85846bdf0d9ff1aae9f760774bf5b -rw-r--r--     root    wheel   1.1 kB /private/etc/apache2/original/extra/httpd-info.conf
b822424c1eba4ae12efa0bad98c6288f9111d5da88f43a847c69e660dc3c8c80 -r--r--r--     root    wheel   6.2 kB /private/etc/openldap/schema/collective.schema
c90d596b58cb588b3ae77312f9fe8b0511ea8a842caf058d130138a32cca8419 -r--r--r--     root    wheel   2.1 kB /private/etc/openldap/schema/fmserver.schema
5475edebf371c8c4771d6951a51a80e4c40871a01355122cac4146966d6aa58c -rw-r--r--     root    wheel   4.5 kB /private/etc/apache2/extra/httpd-mpm.conf
61b95be8351545f888956f733db55f810e3b5f8b4b221ad219428b95c55bdbc9 -rw-r--r--     root    wheel   1.1 kB /private/etc/asl.conf
b9611702dbb3c2d02e060d82cff7a542f6ec6de29aabaa0b4c8482e5ed1f78d0 -rw-r--r--     root    wheel    <span class=m>113</span> B /private/etc/pam.d/authorization_aks
9a31f3b43190281ce1320ac62b3d7672c0bd5bb8bf607c82767994bfa815068e -rw-r--r--     root    wheel    <span class=m>153</span> B /private/etc/asl/com.apple.eventmonitor
cc58ac4627390ef04037b7b77ed0359b267a8e8ceb99bdc3aa156dae6367094a -rw-r--r--     root    wheel    <span class=m>607</span> B /private/etc/apache2/original/extra/httpd-userdir.conf
17294d602f2d28944e6517a6a8a432548351d1eaf468062b8da6d84bbf7c5440 -r--r--r--     root    wheel    <span class=m>133</span> B /private/etc/uucp/passwd
27b21d21df689f2f097f56b907d2a936acbeb943fc98bfeb56d2c62cba33c451 -rw-r--r--     root    wheel     <span class=m>13</span> B /private/etc/paths.d/40-XQuartz
1f07bc400e932a1f36c65634b9f5e7d7a6249c58195f903fe21d4bf83df43c5b -rw-r--r--     root    wheel   3.4 kB /private/etc/wfs/httpd_webdavsharing_template.conf
444c716ac2ccd9e1e3347858cb08a00d2ea38e8c12fdc5798380dc261e32e9ef -r--r--r--     root    wheel    <span class=m>265</span> B /private/etc/bashrc
fa115d33bdc964acfe0b0241c511c2bed643820f8c574e45f443a17a331cf138 -rw-r--r--     root    wheel    <span class=m>318</span> B /private/etc/pam.d/screensaver_ctk
eab8fa9f3d43e099731db74d17733fb46c5578206f4dbb0db204bc2cef68664a -rw-r--r--     root    wheel   7.6 kB /private/etc/passwd
99c7c05d6e8690b32ea58d6fcda64a090eaae782026551d2d9e347694c626ce7 -r--r--r--     root    wheel   7.8 kB /private/etc/openldap/schema/nis.schema
025f5e31cd7b2248a0a661d8d346452c31d98e280f3420c3f6017c74c829ae73 -rw-r--r--     root    wheel    <span class=m>745</span> B /private/etc/ssl/openssl.cnf
9d70873703af389018ccc7b57a503d2692ba1d6b71271bcf00473d40f5095486 -rw-r--r--     root    wheel   3.2 kB /private/etc/apache2/original/extra/proxy-html.conf
69c9044d7bdcdd195249b13b8893abf7c60092391975408468ac5e8969fcd79a -rw-r--r--     root      _lp   6.5 kB /private/etc/cups/cupsd.conf
d7c000b62ab236b5c5c4db8ad7edec232b2afe95d85c8e064a5c9f6d5308620f -rw-r--r--     root    wheel   1.6 kB /private/etc/postfix/TLS_LICENSE
ed9d05e8ec15f676263a184a7c30858f2d5cd0258da168d3b262b76567bc7bae -rw-r--r--     root    wheel   2.9 kB /private/etc/apache2/original/extra/httpd-default.conf
bb3d6775b7fc8042b2b68232384694ac3bee6d1100b87f9dcd0840ee935dd2b5 -rw-r--r--     root    wheel    <span class=m>12</span> kB /private/etc/postfix/canonical
96618e0c2ba27c318f77262c22a99f039ecf2e1d83754fcb1a0f208e961da2f7 -r--r--r--     root    wheel   1.5 kB /private/etc/openldap/schema/openldap.schema
cf6e6fe1497d5b3983529174674b8a09941d67244727157e208d37b24b247bc1 -rw-r--r--     root    wheel    <span class=m>166</span> B /private/etc/pam.d/authorization_la
aa464696f1c0282b1728b79e5da52c6f44d130b93c6e3011ea4e67407461c191 -rw-r--r--     root    wheel   3.6 kB /private/etc/racoon/racoon.conf
1dc9a5dec35592b043715e6b5a1796df15540ebfe97b6f25fb4960183655eec9 -rw-r--r--     root    wheel   9.3 kB /private/etc/zshrc_Apple_Terminal
e2dd2ce55d57c625d241b8ddbc834fbab3e9c2061955b094326201dfd083d051 -rw-r--r--     root    wheel    <span class=m>202</span> B /private/etc/asl/com.apple.clouddocs
eb33ba8357c7166620b5c33fc8436a0081ba093f7cbf60fef7ddb35b491a4012 -rw-r--r--     root      _lp    <span class=m>128</span> B /private/etc/cups/snmp.conf
d7cbf00c6fb63b14e2314cb5aff696e6d01e6911e0bcebf2c540ddb28b614340 -r--r--r--     root    wheel   6.8 kB /private/etc/openldap/schema/nis.ldif
91d53776cbd13b565b93dfae32ceb7236c09df3f4629329b521fe1b523460613 -r--r--r--     root    wheel   3.3 kB /private/etc/openldap/schema/dyngroup.ldif
4a054f138fbed4a755b351fb51dd83fe3005e07fc7d075c3880e10ec8950873a -r--r--r--     root    wheel   <span class=m>123</span> kB /private/etc/openldap/schema/microsoft.schema
8e920f9fb045a6dfe53fd18bb6450c5b3051bd88c4c7eac88b7c41deee02e6a8 -r--r--r--     root    wheel    <span class=m>246</span> B /private/etc/pam.d/sudo
9d5aa72f807091b481820d12e693093293ba33c73854909ad7b0fb192c2db193 -rw-r--r--     root    wheel    <span class=m>189</span> B /private/etc/shells
81bac019ddc3523e67726f6159c180bd128b9ef1872d5359fe40e3fa78690694 -rw-r--r--     root    wheel    <span class=m>387</span> B /private/etc/asl/com.apple.AddressBookLegacy
309c09ccf0f826e2e753472a01fa32d7f1f326879992e8e925ef3ced57a6252b -rw-r--r--     root    wheel     <span class=m>11</span> B /private/etc/nanorc
a27af5a5be37a725abe8587a803e601e243739c2ea4abfde9707199b66369deb -rw-r--r--     root    wheel   1.3 kB /private/etc/newsyslog.conf
810dbd036a97217460ec5f56e543621dd2a735bb809fca45327400e2afc272ad -rw-r--r--     root    wheel    <span class=m>27</span> kB /private/etc/postfix/main.cf.proto
8aa44a4856b41d4f1dd7799b975eb68472df1d6b8f8268a0cc6aaa9975f55349 -rw-r--r--     root    wheel    <span class=m>891</span> B /private/etc/rtadvd.conf
49422ce34f9e3b5134cecdb73f5f54fa34480fc424279321dab18240b4bf8cde -r--r--r--     root    wheel   2.4 kB /private/etc/openldap/schema/misc.schema
eff9ba3a711059ac519e1914477a28db07ce3ed8c70eb36479e0da39cd41fc4e -rw-r--r--     root    wheel    <span class=m>197</span> B /private/etc/pam.d/passwd
e523e826b0192c39b42d71597caa8b3e5e166d1e6af98528f046f1ebe6727925 -rw-r--r--     root    wheel    <span class=m>24</span> kB /private/etc/postfix/header_checks
f63a90bd20d0baea6f3b7f5c0679d02e58dc294d5a37bd0c44f2046609d74b4a -r--r--r--     root    wheel    <span class=m>16</span> kB /private/etc/snmp/snmpd.conf.default
c7e32a8ad7f390bc508c245dfd929cccf18cf222889ca7eed281619495b3dc5f -rw-r--r--     root    wheel   <span class=m>346</span> kB /private/etc/ssl/cert.pem
49fde98b0963f27c0630072414be0ee0205d71eba529bbaf86b65d1e1603eead -rw-r--r--     root    wheel   2.9 kB /private/etc/apache2/extra/httpd-autoindex.conf
f918b0dec7a783521bd7efbe2e5aef28e2d3250bec1cb524752bb31d18ddbe0b -rw-r--r--     root    wheel    <span class=m>149</span> B /private/etc/asl/com.apple.performance
b2dc9fa1938c981ce201f1458afb373d97caf860d9bfba0ded9c450a64f8e65d -rw-r--r--     root    wheel     <span class=m>27</span> B /private/etc/ntp.conf
9e8dffed375e348782c5bc8e15b6a33ea002c96588b7686bd230693dd86898eb -rw-r--r--     root    wheel    <span class=m>181</span> B /private/etc/pam.d/checkpw
8a8a65b24957cbf2c5376a2a7a4dccb3e02f8cc3cfb338caa58cb93345c6a23c -r--r--r--     root    wheel    <span class=m>203</span> B /private/etc/pam.d/cups
c74b98809cf175d83699a095bf9f20689dcc66daeedc7e48119026e88103fb09 -rw-r--r--     root    wheel     <span class=m>44</span> B /private/etc/postfix/custom_header_checks
891232253c3bb2789de7cb01b8d313e3c3ed6820434457634775867cc50c657b -rw-r--r--     root    wheel   5.4 kB /private/etc/postfix/makedefs.out
ba4bb2c9087c046186ef306d4bd5046694e7bc0bc715503ba210e6f96e417642 -rw-r--r--     root    wheel    <span class=m>13</span> kB /private/etc/apache2/original/extra/httpd-ssl.conf
4348468f1850b16e8ad3f7be8963bde559cfd8dd7aed8ffd655a40aaa551e073 -rw-r--r--     root    wheel    <span class=m>156</span> B /private/etc/asl/com.apple.MessageTracer
b2aac03248e8f229c703561f5bb059f9be491e5db9f447692398d775a9fb12a5 -rw-r--r--     root    wheel    <span class=m>195</span> B /private/etc/auto_master
bf41a1579c3d12a4b8466fad91794157fcca4b2c611fb178ddce232cd9a4e0e5 -r--r--r--     root    wheel   8.1 kB /private/etc/openldap/schema/corba.schema
c78f581bf6c453c6cf4e4ba241fe081d7de69bbfa42d41fc65a475827c8bd627 -rwxr-xr-x     root    wheel    <span class=m>695</span> B /private/etc/periodic/daily/130.clean-msgs
7e94a499c84675258a9734b150a28950fa22cbaad5f1eedfff507541d9f7d9ef -rw-r--r--     root    wheel    <span class=m>13</span> kB /private/etc/apache2/magic
66dfdc46b6b66f0830252f20e1c74aa865656223e30f95fbef6b05051fdc3cde -rw-r--r--     root    wheel   9.3 kB /private/etc/bashrc_Apple_Terminal
f19f881084f599fa261243918d922373eab14623e78d23c41fcc031aa21ca7b6 -rw-r--r--     root    wheel    <span class=m>941</span> B /private/etc/emond.d/emond.plist
b19baf7d26dad9163a2e87c5b9731943e8dad7243c81aacfacf6bdcdcae03c61 -rw-r--r--     root    wheel    <span class=m>200</span> B /private/etc/pam.d/chkpasswd
effcfce27485ef1ca9142df4fe810d518e720092b00dce0a9504e2ef378cc42c -rw-r--r--     root    wheel    <span class=m>27</span> kB /private/etc/postfix/main.cf
d73737159f9e3bedf75645dd7c2254331beea55567da92f3b974d4ba8194ff81 -rw-r--r--     root    wheel    <span class=m>13</span> kB /private/etc/postfix/virtual
1b3f45ae268583561d2e9baa82474dd0035d974cf687991a20f885f107dd943d -r--r--r--     root    wheel   2.0 kB /private/etc/openldap/schema/collective.ldif
f99a4803d9f2f8c48c33866487067fbd3a0d02080e10749e70445813b4d60954 -rwxr-xr-x     root    wheel   1.6 kB /private/etc/periodic/daily/110.clean-tmps
7ac5924452faaf32bbfbd41f816947fccc3ff2fc17554be7bc5fff99d71ebe2e -rw-r--r--     root    wheel   6.9 kB /private/etc/postfix/relocated
7cb50dc544e9050e398ebc0844081e928ca52c09a0d304228489962a93b63692 -rw-r--r--     root    wheel    <span class=m>365</span> B /private/etc/hosts
fde802d853379ae3724693f05be7f273b92429ab500a7806683e7a21975f743e -r--r--r--     root    wheel   3.0 kB /private/etc/openldap/schema/java.ldif
dbec41507d3e3c390b0418d96c9ea5f61d3e9ac969bd025b6d23b78af25adaeb -rw-r--r--     root    wheel     <span class=m>18</span> B /private/etc/paths.d/go
2012882e055c2a2502cd7d3dd373c1804f0fce782225e90aca491abad720b53a -rw-r--r--     root    wheel   1.5 kB /private/etc/apache2/original/extra/httpd-vhosts.conf
dd89ec314b4e26aa2481a315c7e71404ccff929ead511269e934406be0e61143 -rwxr-xr-x     root    wheel    <span class=m>888</span> B /private/etc/periodic/monthly/199.rotate-fax
3efeec1e339725bfadd53138dde7822ebc57ba73275a1c0fc05e0d7d8abafc4e -rw-r--r--     root    wheel    <span class=m>624</span> B /private/etc/wfs/httpd_webdavsharing_proxy.conf.inactive
ede47b49ba30fbd0e02f10006fa967d2887f7e4c676e6b657ae0a20285ef1d4c -rw-r--r--     root    wheel   2.2 kB /private/etc/apache2/extra/httpd-multilang-errordoc.conf
ebbeeaa6c956e56727c1391e4443a7da9da70e5e9201fcf69194e9ce397f9a2d -rw-r--r--     root    wheel    <span class=m>339</span> B /private/etc/asl/com.apple.coreduetd
2a0ba79339b7112dbd24b5fdd4b54f32573971a0ad9906240bbeb6bad3d382bc -rw-r--r--     root    wheel   5.3 kB /private/etc/rc.netboot
6fb5b260918922ca5ca4dfb296967d8edb9c12f2c043f26b64590758441d682d -rw-r--r--     root    wheel   1.0 kB /private/etc/pf.conf
011fd8d7180df2a60de23826192aab50889f73488d01d6c35d186fcb7f64640d -rw-r--r--     root    wheel    <span class=m>61</span> kB /private/etc/apache2/mime.types
7c1f46f8dca762135990bdf0e3aa0395d4867858e35a3f2583549fa6cd5b082a -rw-r--r--     root    wheel    <span class=m>189</span> B /private/etc/csh.cshrc
cdfc5a48233b2f44bc18da0cf5e26df47e9424820793d53886aa175dfbca7896 -rw-r--r--     root    wheel     <span class=m>45</span> B /private/etc/paths
64d9fef3a2825ba4d770b38b5ccd12ad4df477535f345fa8649d65fea940fcbf -rw-r--r--     root    wheel    <span class=m>512</span> B /private/etc/pam.d/login
38b6d46f6924364dc3013ffad83a12b7bc10bf3a878b5ae0f53ef117851900b8 -rw-r--r--     root    wheel   1.7 kB /private/etc/apache2/extra/httpd-dav.conf
ba4bb2c9087c046186ef306d4bd5046694e7bc0bc715503ba210e6f96e417642 -rw-r--r--     root    wheel    <span class=m>13</span> kB /private/etc/apache2/extra/httpd-ssl.conf
ede47b49ba30fbd0e02f10006fa967d2887f7e4c676e6b657ae0a20285ef1d4c -rw-r--r--     root    wheel   2.2 kB /private/etc/apache2/original/extra/httpd-multilang-errordoc.conf
5475edebf371c8c4771d6951a51a80e4c40871a01355122cac4146966d6aa58c -rw-r--r--     root    wheel   4.5 kB /private/etc/apache2/original/extra/httpd-mpm.conf
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 -rw-r--r--     root    wheel      <span class=m>0</span> B /private/etc/hosts.equiv
e05e1b6f966477644849720be93b0707029323b732b4105b63475443fa740aa2 -rw-r--r--     root    wheel    <span class=m>376</span> B /private/etc/asl/com.apple.networking.boringssl
39bc7222686b37aea251957d5b0658600711bc91815a792459395188ace48e33 -rw-r--r--     root    wheel     <span class=m>23</span> B /private/etc/ntp_opendirectory.conf
ad2902787f6a2cc2728320d9bf5387371d88a8226c32bac08df9f6d7886bfee4 -r--r--r--     root    wheel    <span class=m>20</span> kB /private/etc/openldap/schema/ppolicy.schema
69a61ae495580e0e144792c9a809bffe707a6a13f292095f43a7a88c92b11ef0 -rwxr-xr-x     root    wheel   1.2 kB /private/etc/periodic/daily/310.accounting
49fde98b0963f27c0630072414be0ee0205d71eba529bbaf86b65d1e1603eead -rw-r--r--     root    wheel   2.9 kB /private/etc/apache2/original/extra/httpd-autoindex.conf
f1e89e3a029a3b72a30f82fc7346c13030b4de16b77ecc4c58f4a4de6f99c242 -rw-r--r--     root    wheel     <span class=m>82</span> B /private/etc/com.apple.screensharing.agent.launchd
a18ff587cf7d16939acf5a969da49a393ce503b1c4b83ad42e4b902991329b4f -r--r--r--     root    wheel    <span class=m>48</span> kB /private/etc/openldap/schema/apple.schema
6293f4cc430a3d8648fa60f26546d16e55f84d05b71f996ca930a95aa3ce312c -r--r--r--     root    wheel   3.3 kB /private/etc/openldap/schema/dyngroup.schema
c0dbae0bb16ea7cbc26c0d49286946ef8713335564f5c0a2f4ab7339b8f948f2 -r--r--r--     root    wheel   2.1 kB /private/etc/openldap/schema/misc.ldif
fc1166d771ec0092cb6280cadf54e9df3fa4eff6be0132f9064f87a7b0b6416a -r--r--r--     root    wheel   3.3 kB /private/etc/openldap/schema/openldap.ldif
b232f6b78ffdcfdf34697f1432b6cd9bcbad27da384d493d9285b02f398c13ea -rw-r--r--     root    wheel   1.7 kB /private/etc/rpc
9a40f8365adb49f0a63930316c475251631150f0f58bfad692a633c8e7486fc9 -rw-r--r--     root    wheel     <span class=m>96</span> B /private/etc/syslog.conf
b99ca2f2de327fd9a0374e1eacd3ccbc0f6fce17e0372c42d370ce4852bb75f4 -rw-r--r--     root    wheel    <span class=m>22</span> kB /private/etc/apache2/original/httpd.conf
b45fd6ac093bcb4aec44b366d14300cdb1a65f65d7a630630af0f89c9c937894 -rw-r--r--     root    wheel    <span class=m>265</span> B /private/etc/openldap/ldap.conf
36ff03121c003e884d67372d060c83886d73429fc62df37c831f604ecb59cb56 -r--r--r--     root    wheel    <span class=m>717</span> B /private/etc/openldap/schema/apple_auxillary.schema
b01b61f6b1486186b84ac009ccfff409fc43dd66e1b780a60de94090e8459dc2 -rw-r--r--     root    wheel    <span class=m>154</span> B /private/etc/newsyslog.d/wifi.conf
334c18bfe6d007a0bcb6f1e7b3619b9592acea6ce60775d6f8d3d56f7ca8d50b -r--r--r--     root    wheel    <span class=m>72</span> kB /private/etc/php.ini.default
1b3a1b45deb322db6df7d39dd52f67d1d49cb89e77388c41dccf640dcd83cd37 -rw-r--r--     root    wheel    <span class=m>10</span> kB /private/etc/postfix/aliases
8923cf7346a5536cc5fadf73e1f92681cf31e73d06548f8abd1e7854f5694290 -rw-r--r--     root    wheel    <span class=m>351</span> B /private/etc/notify.conf
a377ed0d15192ea50c9de076583030fe246bec85bd37a9fe1f3cd792e84231ab -r--r--r--     root    wheel    <span class=m>20</span> kB /private/etc/openldap/schema/pmi.schema
fbbd9eac3bb65ba340cda731e596fc52e76c49339e7c7dd6653f06d17edb36ad -r--r--r--     root    wheel    <span class=m>527</span> B /private/etc/pam.d/sshd
aab9982ea2af8b86b1fde1e8c199de6f12f45db1a831c1804c33ee65e53d6d25 -rw-r--r--     root    wheel    <span class=m>264</span> B /private/etc/pam.d/authorization
d0f8d2287d44031b79d9798dc6c68ea7d789ffc129ec2056b3630c938cc54068 -rw-r--r--     root    wheel   3.3 kB /private/etc/wfs/httpd_webdavsharing.conf
405101681e712d2727fd6131a84b0eb1b89ed3b72ad3722916368b5ea3cdf6f6 -rw-r--r--     root    wheel    <span class=m>943</span> B /private/etc/wfs/wfs.plist
be95a05eafeae5a7450eef61d6477d0b1080f314c3338b5f81c5d5fc65681fdd -r--r--r--     root    wheel   1.3 kB /private/etc/irbrc
f33710cbbb38b977b7ed1a10038f6f1911d0ce8dd82f65e1a54db13fbecc429f -r--r--r--     root    wheel    <span class=m>12</span> kB /private/etc/openldap/schema/cosine.ldif
422bfa0619b344ec6248e589333df261c4901feca2ce816fd23ef99b5229b7a0 -r--r--r--     root    wheel   5.7 kB /private/etc/openldap/schema/samba.schema
950f16a5623699af1fa0e03f9f286374229bbc84d7e887efa3984a1902e48d4b -rw-r--r--     root    wheel    <span class=m>175</span> B /private/etc/newsyslog.d/com.apple.slapconfig.conf
994263a50efad8a1b416754ea4ed463d5e1a7524ed2b3105b780dfe480dbfe94 -r--r--r--     root    wheel    <span class=m>145</span> B /private/etc/php-NOTICE-PLANNED-REMOVAL.txt
97a0a5a23df5f84d6c4396e5e1c4c6b10c690300ee392cfbf633002e300ce2cb -rw-r--r--     root    wheel    <span class=m>10</span> kB /private/etc/postfix/generic
b86accf42ae92d4e00b67c50010b7f278bc76c50755bdc9638e2096cbd596890 -rw-r--r--     root    wheel   6.4 kB /private/etc/protocols
24240ece7cf8aa30d242f178d7defd3a47d631bbbcf897d2f170e28b863564fa -rw-r--r--     root    wheel    <span class=m>178</span> B /private/etc/asl/com.apple.mail
71be406f45c35429621a43970b0a10debcfd319f0e0ecb1f9b5c5c0ce4cfc3bd -rw-r--r--     root    wheel    <span class=m>121</span> B /private/etc/csh.login
2e5298d1432df0d5f3b741a1e052cfdb73cc4d800db34651f083f36b3c64dcb8 -r--r--r--     root    wheel    <span class=m>10</span> kB /private/etc/openldap/schema/duaconf.schema
36816c4a31b3fbbc86312073f65ba5b514823f89864ad2f3ede7b6b456a8ed4d -r--r--r--     root    wheel    <span class=m>27</span> kB /private/etc/security/audit_event
d4a58e12a2e3a9aa4ca72cbe4c63b786b20d6a212a87759f6c93db594be3e3f0 -r-xr-xr-x     root    wheel   1.3 kB /private/etc/security/audit_warn
a744a313d0b95f6f15768b78d15cf3168ffd18abde4e4801a55b0fbb1c37ae86 -rw-r--r--     root    wheel    <span class=m>233</span> B /private/etc/asl/com.apple.install
a1b83027e0b929e389bde2984078b7debf7f885051d9f9be18545aa07bebac21 -rw-r--r--     root    wheel    <span class=m>409</span> B /private/etc/asl/com.apple.mkb.internal
533ad90f9c16d3d000a929513d72050bdef7e75bc8ea1790694227c20ab97f2e -rw-r--r--     root    wheel    <span class=m>176</span> B /private/etc/newsyslog.d/com.apple.xscertd.conf
b17912cf8ac845d1098829a3f876bdc7597bc8360bb8f260e49d1e3ca26d5029 -rw-r--r--     root    wheel   1.4 kB /private/etc/apache2/extra/httpd-manual.conf
28048538f6a15661bdefcf706f39d0003fb9107bdc5206df295db67b66b8345a -rw-r--r--     root    wheel    <span class=m>365</span> B /private/etc/pam.d/screensaver_la
16c13e23b179e6b325102eb285e78b7678ee64231f9bbb2ff6bd5311f38f89ae -rw-r--r--     root    wheel   7.4 kB /private/etc/postfix/master.cf
61b42416ea3c5c9d5850364a23ec3aa5b6ddc6e2055b0402d6435b8fed46f3c5 -r--r--r--     root    wheel    <span class=m>652</span> B /private/etc/security/audit_class
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 -rw-r--r--     root    wheel      <span class=m>0</span> B /private/etc/xtab
fb5827cb4712b7e7932d438067ec4852c8955a9ff0f55e282473684623ebdfa1 -r--r--r--     root    wheel   3.1 kB /private/etc/zshrc
1aac36c9a80ecab24b5d4346ac5c605a9614f89590e6d0957b82f781a8d40a49 -rwxr-xr-x     root    wheel   1.1 kB /private/etc/periodic/daily/140.clean-rwho
ca2ae7cf01205f3b961c70c607a31c5ed7cc4434dc94d5a5152e18844c5ecffe -rwxr-xr-x     root    wheel    <span class=m>378</span> B /private/etc/periodic/daily/199.clean-fax
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 -rw-r--r--     root    wheel      <span class=m>0</span> B /private/etc/rmtab
e02803e7d3435412c397478205b16c95486fde05ecde74959f9799c49c7ce009 -rw-r--r--     root    wheel    <span class=m>149</span> B /private/etc/auto_home
bd0ec71eab6515a902703163e65839498429e7d31860c9584b30b635f7423367 -r--r--r--     root    wheel    <span class=m>14</span> kB /private/etc/openldap/schema/java.schema
11eddeb0e0d55ea1bf43c180f04a53533d5cc71d2a69fbbcf7ca0488c8450d79 -rwxr-xr-x     root    wheel     <span class=m>23</span> B /private/etc/paths.d/100-rvictl
20909c75c14c9f5360a48c889d06a0d6cfbfa28080348940fc077761744f2aa5 -rw-r--r--     root    wheel    <span class=m>822</span> B /private/etc/emond.d/rules/SampleRules.plist
11ae0d388aed5d193821d33d060da5ed9119d19689ce6c220b407a4c5da3553f -rwxr-xr-x     root    wheel   1.0 kB /private/etc/periodic/monthly/200.accounting
8c6e2a2647ee854f469a3bb798e02ba5a8b1812cab229ff129f073e7a80c1202 -rw-r--r--     root    wheel   <span class=m>678</span> kB /private/etc/services
063a5972c7b72eda797684b2c034f37a000aaf7bd3b91b01f7cdd3ff74f170e7 -rw-r--r--     root    wheel   5.7 kB /private/etc/gettytab
b45fd6ac093bcb4aec44b366d14300cdb1a65f65d7a630630af0f89c9c937894 -rw-r--r--     root    wheel    <span class=m>265</span> B /private/etc/openldap/ldap.conf.default
bbe18692eb80dc6e27643a5392b358be548edaec210206eeb1a67c99892fc33e -rw-r--r--     root    wheel     <span class=m>39</span> B /private/etc/csh.logout
7de66c7adb93cb1e0da88874d27668c1d78488a9578268e8234460d9083b2e01 -rw-r--r--     root      _lp   6.5 kB /private/etc/cups/cupsd.conf.default
ee479a7a0dd839c4a08e73d5a6fcffbe750bd47b82cf7c633ed20c5e63b8ed03 -rw-r--r--     root    wheel   5.0 kB /private/etc/defaults/periodic.conf
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 -rw-r--r--     root    wheel      <span class=m>0</span> B /private/etc/kern_loader.conf
7bf0e7399139a3a478b9f447ceb042dee1137261b39dace27db18a93242ebdc2 -r--r--r--     root    wheel   1.8 kB /private/etc/openldap/schema/corba.ldif
c536e94effbd1e5890f6fb084590a091afc8369a65a9a8b3d71edbfde290da45 -r--r--r--     root    wheel    <span class=m>20</span> kB /private/etc/openldap/schema/core.schema
aea837b88e320abcd476f5839952d5e1a612c0e4a225cb9205d20071e6c37745 -rw-r--r--     root    wheel    <span class=m>106</span> B /private/etc/mail.rc
b14dbb949b10a0635b7303ff96d86406d8d6c64d414a1e0f91cdf8ba2a62c74a -r--r--r--     root    wheel    <span class=m>191</span> B /private/etc/pam.d/other
9d6f5bffb6fda39e61e1dd90109a42b7a1abf8a5995f3e81e87b7bf4f312b309 -rw-r--r--     root    wheel    <span class=m>119</span> B /private/etc/ftpusers
0cb5352ac33727fd7979e454f6ac1a56b7795a8ab5a25d7cc955133fb47cf9c4 -rwxr-xr-x     root    wheel    <span class=m>522</span> B /private/etc/periodic/daily/400.status-disks
16c13e23b179e6b325102eb285e78b7678ee64231f9bbb2ff6bd5311f38f89ae -rw-r--r--     root    wheel   7.4 kB /private/etc/postfix/master.cf.default
d9013690a0652573167ef63917f6ed2ad63a5e15b1f82d40010c75f33ec85da1 -r--r--r--     root    wheel    <span class=m>205</span> B /private/etc/apache2/other/mpm.conf
14ecbb4a93f277771924c3a9aa870ecd67a742fd6164572af329feef40061325 -rw-r--r--     root    wheel    <span class=m>318</span> B /private/etc/asl/com.apple.login.guest
b22a5ff409482104f804f04b0035f2fd1f6801974645f79c87e9025729a50286 -rw-r--r--     root      _lp   3.1 kB /private/etc/cups/cups-files.conf.default
18dc169426b3130e43cd1a5919f95dd58ccee6d49a9182a4b2ecdf5c5bb563bc -rw-r--r--     root    wheel   <span class=m>577</span> kB /private/etc/ssh/moduli
c64beac4afa42e602286728c1e0158fc90195768e97d5f6bc0d917208faeb3b3 -r--r--r--     root    wheel    <span class=m>21</span> kB /private/etc/openldap/schema/core.ldif
8c716d8131c6f1ae290b49beed057f06bd5cd18b5227cfe3b50556b35e21ce3b -rw-r--r--     root    wheel   5.3 kB /private/etc/php-fpm.conf.default
a3fe9f414586c0d3cacbe3b6920a09d8718e503bca22e23fef882203bf765065 -r--r--r--     root    wheel    <span class=m>189</span> B /private/etc/profile
f63a90bd20d0baea6f3b7f5c0679d02e58dc294d5a37bd0c44f2046609d74b4a -rw-r--r--     root    wheel    <span class=m>16</span> kB /private/etc/snmp/snmpd.conf
6e72e6f9366198e19491ccc785a0cdfb5a05510609c03fcf388b02aac43fec0b -rw-r--r--     root    wheel   1.0 kB /private/etc/ssl/x509v3.cnf
b86ff58053e9e930a0324f7fb5e0458213567feca9e97de92da20bff82f17e06 -r--r--r--     root    wheel   2.4 kB /private/etc/uucp/sys
146f0e625f4a1b8b11fabab45b66d989e85d0408348403678074b3db881e3587 -rw-r--r--     root    wheel    <span class=m>165</span> B /private/etc/newsyslog.d/com.apple.slapd.conf
726813f6f77f7b566a7c004d79cac51dfdc3b28ff3265179e7fbb032b706ba6d -r--r--r--     root    wheel   4.0 kB /private/etc/openldap/schema/ppolicy.ldif
8475720c1288108fa6c55c028a26e7aa12155009095dd8c04a547969b65a95b3 -rwxr-xr-x     root    wheel    <span class=m>548</span> B /private/etc/periodic/daily/420.status-network
abb7d93ea2ef352db65c05101a112264334e7e531522f576ee397371e13fe5d8 -rw-r--r--     root    wheel    <span class=m>183</span> B /private/etc/pam.d/authorization_lacont
4ae766c32277f60bba1b505e3837ccc29587c0cb4fbf65d20b17baa9463b0fb6 -rw-r--r--     root    wheel    <span class=m>13</span> kB /private/etc/postfix/transport
a9419086fc2b70f69130c3ee9f8761b0a12b0c7da47d3b779b04ab3827081cf0 -rw-r--r--     root    wheel   5.1 kB /private/etc/apache2/extra/httpd-languages.conf
e8c63560d75c0c459666f2d8c69bd23b83151080d571148b9a30667f680d6f3c -rw-r--r--     root    wheel   3.2 kB /private/etc/group
7ca5887133958e0ac30c92ecec70fe753977cfcc0137cfa93311aeed8fa38e24 -rw-r--r--     root    wheel   <span class=m>117</span> kB /private/etc/openldap/AppleOpenLDAP.plist
4277bb97ba7b51577a0d38151d3e08b40bdf946753f5b5bdeb814d6ff57a8a5e -rw-r--r--     root    wheel    <span class=m>515</span> B /private/etc/afpovertcp.cfg
f047c7a23d830f221f142861d2ae10eb4a27d74beff3fcaf599b4c441ae44f5e -r--r--r--     root    wheel    <span class=m>13</span> kB /private/etc/openldap/schema/microsoft.std.schema
94139c5762d820ac8a6d567ca5a5e9753af95e1c8560f23e65bc169be11f4042 -rwxr-xr-x     root    wheel    <span class=m>712</span> B /private/etc/periodic/daily/999.local
69f2f70c4d02fe6a0d4ecc99b8cfb676090aae0435c74eb45b2d79c72cb39a09 -rwxr-xr-x     root    wheel    <span class=m>606</span> B /private/etc/periodic/monthly/999.local
b99ca2f2de327fd9a0374e1eacd3ccbc0f6fce17e0372c42d370ce4852bb75f4 -rw-r--r--     root    wheel    <span class=m>22</span> kB /private/etc/apache2/httpd.conf
db16889d677588787af70881d7e0af827e847a5660e9a78c955da53d8edd614b -rw-r--r--     root    wheel    <span class=m>105</span> B /private/etc/asl/com.apple.iokit.power
bea9ba8f43b879adff12ba844aad204ae6be074b356a4ff917305725b4341eb5 -r--r--r--     root    wheel    <span class=m>154</span> B /private/etc/newsyslog.d/files.conf
0d5d7c3f51196286c17c894bf77ab0ba057256aa04a455a137c3860fbb46d98b -r--r--r--     root    wheel   3.5 kB /private/etc/openldap/schema/README
6c2621756bae333c3af6429407f949f6220bd75df956606ed911bf6b5c8348fd -rw-r--r--     root    wheel    <span class=m>140</span> B /private/etc/pam.d/smbd
38b19f16f2cfe9cb398e59544cbbeeb4998718dbf231251a41eb31893aed223b -rw-r--r--     root    wheel   3.5 kB /private/etc/postfix/bounce.cf.default
6dcf0856acd475d75f7d4f2cb5e6a743b2df97ddd394b78e07ae172ab7f04363 -rw-r--r--     root    wheel    <span class=m>20</span> kB /private/etc/postfix/postfix-files
05e4653d532915fca72e4352ade5040c3361340920eee047ac4dd313bc9d8e19 -rw-r--r--     root    wheel   1.6 kB /private/etc/ssh/ssh_config
49dede3f9e65fd6ea036bc1598e07f1f73a3ad9c70c4744de954d6d0a8fdbdb5 -r--r--r--     root    wheel    <span class=m>194</span> B /private/etc/apache2/other/php7.conf
a5ff0b83be70bdb0107e8e6f4d2bc8e3608e7e9b15e15145b5f24ca4c559f504 -rw-r--r--     root    wheel   1.9 kB /private/etc/autofs.conf
1c350ccbbf5e4e09923f5bd1d93fd1578e0a5b6b7d4b85c631d09e1a1a71dbd3 -r--r--r--     root    wheel   6.3 kB /private/etc/openldap/schema/inetorgperson.schema
3ada6707f5fd265c70176f24ff988acb15983df6b2b99a5b3cdb833c8c38ea9f -r--r--r--     root    wheel    <span class=m>74</span> kB /private/etc/openldap/schema/cosine.schema
c3a8ab17dd75c874d9da896e729c516273900f8e5b80538daf60e8e95ff86660 -rw-r--r--     root    wheel    <span class=m>22</span> kB /private/etc/postfix/access
effcfce27485ef1ca9142df4fe810d518e720092b00dce0a9504e2ef378cc42c -rw-r--r--     root    wheel    <span class=m>27</span> kB /private/etc/postfix/main.cf.default
768ff09154f6aacda857cb175ef29cf9d23ef9c38c69efdbf20354dbfd7875b1 -rw-r--r--     root    wheel   1.6 kB /private/etc/rc.common
0235d3c1b6cf21e7043fbc98e239ee4bc648048aafaf6be1a94a576300584ef2 -r--r--r--     root    wheel    <span class=m>255</span> B /private/etc/zprofile
a9419086fc2b70f69130c3ee9f8761b0a12b0c7da47d3b779b04ab3827081cf0 -rw-r--r--     root    wheel   5.1 kB /private/etc/apache2/original/extra/httpd-languages.conf
7c982d301cf583c578abb470f5f3782d1d4451e43f5b90c6555ae75be6060d1a -rw-r--r--     root    wheel     <span class=m>53</span> B /private/etc/networks
d8b2b88b7cdec55c5150ced01d4e0a90b275bb11483086ea74cfcd6687309bae -r--r--r--     root    wheel   <span class=m>177</span> kB /private/etc/openldap/schema/microsoft.ext.schema
13e0a0a4991f31f4864096846b379a1d96808c2f0a735b6661aae29481f4bb94 -rw-r--r--     root    wheel    <span class=m>356</span> B /private/etc/pam.d/su
0fd7f2c4f02e68615f137ed090cbba2d1facb40da6bf269e1e326ed6a10aa618 -rw-r--r--     root    wheel    <span class=m>329</span> B /private/etc/pf.anchors/com.apple
847e127803905f596f8c2553ddab8e2d0bca21b4c4ebc79e4be19dcb554df9cb -rw-r--r--     root    wheel   1.3 kB /private/etc/bootpd.plist
e93775ee26b46f1bfc6b5eab5eab05cee15a1718e87a4a01cfbd474b5409d872 -rw-r--r--     root    wheel    <span class=m>621</span> B /private/etc/locate.rc
0c4f41f80e397939b4a9ce2137a1d725efb4d373e0587c8551b9f1ac12ed0a56 -rw-r--r--     root    wheel    <span class=m>312</span> B /private/etc/pam.d/screensaver_aks
c9acb4b8a3e8fd249e672516e37a88d37a9bc8f224b0ab29e76d302c4179de04 -rw-r--r--     root    wheel    <span class=m>28</span> kB /private/etc/pf.os
38b6d46f6924364dc3013ffad83a12b7bc10bf3a878b5ae0f53ef117851900b8 -rw-r--r--     root    wheel   1.7 kB /private/etc/apache2/original/extra/httpd-dav.conf
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 -rw-r--r--     root    wheel      <span class=m>0</span> B /private/etc/find.codes
dbeff46b11216fc8b39dd3160f5085309c031044afdc77f394c94baa558abb60 -rw-r--r--     root    wheel     <span class=m>19</span> B /private/etc/manpaths.d/40-XQuartz
c998ee1b26049571ed20dc89e7dd9d3e87e85846bdf0d9ff1aae9f760774bf5b -rw-r--r--     root    wheel   1.1 kB /private/etc/apache2/extra/httpd-info.conf
b22a5ff409482104f804f04b0035f2fd1f6801974645f79c87e9025729a50286 -rw-r--r--     root      _lp   3.1 kB /private/etc/cups/cups-files.conf
411408289c874dfe0cb497c7d09e0e69601183ad7c9cbedcb9eae7543ff849c4 -r--r--r--     root    wheel   4.8 kB /private/etc/openldap/schema/duaconf.ldif
3c4f529ed0ba941121c3bb29d6e654299d9d9c77a98c2570465f15b0cce05aef -rw-r--r--     root    wheel    <span class=m>408</span> B /private/etc/pam.d/screensaver
081c0787da77e326dcf46a6d955cc807c42ad2362e99876c1c71257b38ff0c84 -rw-r--r--     root    wheel   1.3 kB /private/etc/ttys
2012882e055c2a2502cd7d3dd373c1804f0fce782225e90aca491abad720b53a -rw-r--r--     root    wheel   1.5 kB /private/etc/apache2/extra/httpd-vhosts.conf
43b85836499d3227d242c8ed7a9f33ee61a0b6be1df7bc41f962eff46b547ef1 -rw-r--r--     root    wheel   1.4 kB /private/etc/asl/com.apple.contacts.ContactsAutocomplete
41cdd0a28b1e13f3a475fafd45dec6d335cddecd6d2872a71450d5ab3336ee67 -rw-r--r--     root    wheel   4.6 kB /private/etc/man.conf
933a32202a6ca9d47c1a0af25f8577369b0134ce749002de1228f2b23a909142 -rw-r--r--     root    wheel     <span class=m>43</span> B /private/etc/nfs.conf
9b5ee3e68d2668a06a26bc29488c891a0182b4f2858f8bab97835d4238c8e892 -r--r--r--     root    wheel   3.5 kB /private/etc/openldap/schema/inetorgperson.ldif
6191e98d0228c084ec94f80af3639912b53c316db2cbf29a2123eab64491f709 -r--r--r--     root    wheel   4.1 kB /private/etc/openldap/schema/krb5-kdc.schema
7ba16d87de833e0b81898b544f981cd8b7dedcb8e9ad285bd954af560e089816 -rwxr-xr-x     root    wheel    <span class=m>620</span> B /private/etc/periodic/weekly/999.local
ed9d05e8ec15f676263a184a7c30858f2d5cd0258da168d3b262b76567bc7bae -rw-r--r--     root    wheel   2.9 kB /private/etc/apache2/extra/httpd-default.conf
b17912cf8ac845d1098829a3f876bdc7597bc8360bb8f260e49d1e3ca26d5029 -rw-r--r--     root    wheel   1.4 kB /private/etc/apache2/original/extra/httpd-manual.conf
eb33ba8357c7166620b5c33fc8436a0081ba093f7cbf60fef7ddb35b491a4012 -rw-r--r--     root      _lp    <span class=m>128</span> B /private/etc/cups/snmp.conf.default
9d70873703af389018ccc7b57a503d2692ba1d6b71271bcf00473d40f5095486 -rw-r--r--     root    wheel   3.2 kB /private/etc/apache2/extra/proxy-html.conf
b5847002ceeb4b141a882ba230eb84c186e2d59c74fbb718cc323c6b157ebde8 -r--r--r--     root    wheel   8.5 kB /private/etc/openldap/schema/netinfo.schema
cc58ac4627390ef04037b7b77ed0359b267a8e8ceb99bdc3aa156dae6367094a -rw-r--r--     root    wheel    <span class=m>607</span> B /private/etc/apache2/extra/httpd-userdir.conf
7ed4a5bae35e87e8815cb79dd3be70ac34a3056cb91216a22224a3c99b4c9720 -rw-r--r--     root    wheel    <span class=m>350</span> B /private/etc/asl/com.apple.mkb
125333636796ce03bacf4b079a93b90d3d458a81159c9593339183be5bf51080 -r--r--r--     root    wheel   6.9 kB /private/etc/openldap/schema/pmi.ldif
8a8b640738d46484ecc24c689f70702c5ca35dcd4868f7f413bd8727cd474f10 -rw-r--r--     root    wheel     <span class=m>36</span> B /private/etc/manpaths
</code></pre></div><p>Or list files <strong>within a specific subdirectory</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar ls 9:/private/etc/uucp            
b86ff58053e9e930a0324f7fb5e0458213567feca9e97de92da20bff82f17e06 -r--r--r--     root    wheel   2.4 kB /private/etc/uucp/sys
17294d602f2d28944e6517a6a8a432548351d1eaf468062b8da6d84bbf7c5440 -r--r--r--     root    wheel    <span class=m>133</span> B /private/etc/uucp/passwd
863f779b43680f81799688e91c18a164047a1a8e9dfff650881e50ba35530ed1 -r--r--r--     root    wheel    <span class=m>141</span> B /private/etc/uucp/port
</code></pre></div><p>These listings <strong>rely on the snapshot index</strong> and <strong>do not fetch chunks</strong> from the repository,
however it is possible to actually look at the file content with the <code>cat</code> subcommand:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar cat 9:/etc/uucp/passwd
<span class=c1>#</span>
<span class=c1># The passwd configuration file</span>
<span class=c1>#</span>

<span class=c1>#</span>
<span class=c1># Specify a login name and password that a system can use when logging in.</span>
<span class=c1>#</span>

uucp_tst sekret
</code></pre></div><p>Now let&rsquo;s make a change to that file and push it again:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ sudo sed -i <span class=s1>&#39;&#39;</span> -e <span class=s1>&#39;s/sekret/notsosecret/&#39;</span> /etc/uucp/passwd

$ plakar push /private/etc                                  
open /private/etc/krb5.keytab: permission denied
open /private/etc/aliases.db: permission denied
open /private/etc/racoon/psk.txt: permission denied
open /private/etc/security/audit_user: permission denied
open /private/etc/security/audit_control: permission denied
open /private/etc/sudoers: permission denied
open /private/etc/sudo_lecture: permission denied
open /private/etc/master.passwd: permission denied
open /private/etc/openldap/slapd.conf.default: permission denied
open /private/etc/openldap/DB_CONFIG.example: permission denied
b41802cb-9424-47eb-8186-2847678a8646: OK
</code></pre></div><p>From there,
it is possible to perform an <strong>inode diff</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar diff <span class=m>9</span> b
-  drwxr-xr-x     root    wheel    <span class=m>160</span> B 2020-01-01 08:00:00 +0000 UTC /private/etc/uucp
+  drwxr-xr-x     root    wheel    <span class=m>160</span> B 2021-03-27 22:38:17.685871971 +0000 UTC /private/etc/uucp
-  -r--r--r--     root    wheel    <span class=m>133</span> B 2020-01-01 08:00:00 +0000 UTC /private/etc/uucp/passwd
+  -r--r--r--     root    wheel    <span class=m>138</span> B 2021-03-27 22:38:17.685791098 +0000 UTC /private/etc/uucp/passwd
</code></pre></div><p>This shows that the <code>/private/etc/uucp</code> directory has had its <strong>date</strong> change,
and that <code>/private/etc/uccp/passwd</code> has had its <strong>date</strong> and <strong>size</strong> change,
and from there it is possible to <strong>request a diff of the file</strong> with the <code>diff</code> subcommand:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar diff <span class=m>9</span> b /private/etc/uucp/passwd
--- 98b6658b-a975-47c4-a38f-f958d8d7359f:/private/etc/uucp/passwd
+++ b41802cb-9424-47eb-8186-2847678a8646:/private/etc/uucp/passwd
@@ -6,5 +6,5 @@
 <span class=c1># Specify a login name and password that a system can use when logging in.</span>
 <span class=c1>#</span>
 
-uucp_tst sekret
+uucp_tst notsosecret
</code></pre></div><p>The snapshots are <strong>not incremental</strong> so it is possible to <strong>generate diffs between any of them</strong>.</p><h1 id=removing-old-snapshots>Removing old snapshots</h1><p>Even though snapshots of similar content do not consume much space,
there&rsquo;s no use in keeping a lot of old snapshots hanging around.
Snapshots can be removed from the repository with the <code>rm</code> subcommand:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar ls       
98b6658b-a975-47c4-a38f-f958d8d7359f <span class=o>[</span>2021-03-27T22:29:09Z<span class=o>]</span> <span class=o>(</span>size: 3.0 MB, files: 230, dirs: 39<span class=o>)</span>
b41802cb-9424-47eb-8186-2847678a8646 <span class=o>[</span>2021-03-27T22:38:22Z<span class=o>]</span> <span class=o>(</span>size: 3.0 MB, files: 230, dirs: 39<span class=o>)</span>

$ du -sh ~/.plakar
2.2M    /Users/gilles/.plakar

$ plakar rm <span class=m>9</span>
98b6658b-a975-47c4-a38f-f958d8d7359f: OK

$ du -sh ~/.plakar
2.1M    /Users/gilles/.plakar

$ plakar rm b     
b41802cb-9424-47eb-8186-2847678a8646: OK

$ du -sh ~/.plakar
  0B    /Users/gilles/.plakar 
</code></pre></div><p>The repository <strong>keeps chunks as long as they are referenced</strong> by at least one snapshot,
but <strong>removes them when they become orphans</strong> which is why the <strong>repository becomes empty after the last snapshot is removed</strong>.</p><h1 id=namespaces>Namespaces</h1><p>Sometimes I want to make sure that my backups are <strong>fully disjoint one from another</strong>,
not sharing their snapshots and deduplication.
The <code>plakar</code> repository supports <strong>namespaces</strong> so that I can keep related snapshots together and apart from others.</p><p>For example,
I have backups for <code>poolp.org</code> and for <code>hypno.cat</code> and I want to manage the snapshots separately:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar -namespace poolp.org push data
351348b3-8dc3-4caa-b0be-334c43f4fd13: OK

$ plakar -namespace hypno.cat push data
1fa2dac2-8096-483a-a2d3-2a78ce3706ce: OK

$ plakar -namespace poolp.org ls            
351348b3-8dc3-4caa-b0be-334c43f4fd13 <span class=o>[</span>2021-03-27T22:49:58Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>896</span> kB, files: 79, dirs: 4<span class=o>)</span>

$ plakar -namespace hypno.cat ls            
1fa2dac2-8096-483a-a2d3-2a78ce3706ce <span class=o>[</span>2021-03-27T22:50:40Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>896</span> kB, files: 79, dirs: 4<span class=o>)</span>
$
</code></pre></div><h1 id=stores>Stores</h1><p>In addition,
I may want to provide an <strong>alternate path</strong> to the repository because <code>~/.plakar</code> is not ideal,
<code>plakar</code> supports providing alternate repository path with the <code>-store</code> option:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar -store /var/backups/gilles push data
f6cc2508-ea59-4552-aa4b-27900f0a9781: OK

$ plakar -store /var/backups/gilles ls
f6cc2508-ea59-4552-aa4b-27900f0a9781 <span class=o>[</span>2021-03-27T22:52:47Z<span class=o>]</span> <span class=o>(</span>size: <span class=m>896</span> kB, files: 79, dirs: 4<span class=o>)</span>
</code></pre></div><p>But this doesn&rsquo;t stop here &mldr;</p><h1 id=plakar-server><code>plakar</code> server</h1><p>So far I only showed <code>plakar</code> working on a <strong>local repository</strong>,
it however supports a network mode.</p><p>It is possible to start a <code>plakar</code> server on a machine with:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar server 192.168.0.1:2222    
$
</code></pre></div><p>and on another machine, point the repository to that server:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar -store plakar://192.168.0.1:2222 push /bin
3ac8f3ff-e723-46c3-9ae7-4b11bb27f3b2: OK
$
</code></pre></div><p>The plakar server can use <code>-store</code> itself,
so it is possible to configure it to store at at particular location:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>$ plakar -store /var/backups server 192.168.0.1:2222
$
</code></pre></div><p>and because <strong>I made a monster</strong>,
it is possible that this location is <strong>a different plakar server</strong>,
effectively turning a plakar instance <strong>into a proxy</strong>:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>box1$ plakar server 192.168.0.1:2222
box1$

box2$ plakar -store plakar://192.168.0.1:2222 server 192.168.0.2:2222
box2$

box3$ plakar -store plakar://192.168.0.2:2222 push /bin
998964ac-d3f6-4bf3-b784-50ba616e0776: OK
$
</code></pre></div><p>From the local user point of view,
pushing to a local plakar,
to a remote plakar,
or even to a remote plakar proxying to another plakar <strong>work the same</strong>.</p><h1 id=is-it-released->Is it released ?</h1><p>Nope, <strong>not yet</strong>.</p><p>This is a PoC and <strong>my first real project</strong> in Golang,
so I need a bit of time to make sure it is in a state that I&rsquo;m not ashamed to release.</p><p>If you are a sponsor and want to give it a try,
just mail me and I&rsquo;ll arrange that.</p><h1 id=whats-next->What&rsquo;s next ?</h1><p>A lot of things really&mldr;</p><p>First of all,
every single command needs <strong>a bit of polishing</strong> to have a nice feel because <strong>the output is not always the best</strong> to work with.</p><p>Then,
I have <strong>not implemented any caching whatsoever</strong> so even though it&rsquo;s not dead slow,
a lot of operations <strong>that could be skipped</strong> are <strong>always performed</strong> making it slower than it should.</p><p>Also,
the server mode <strong>doesn&rsquo;t use encryption at this point</strong> and while it is ok on a personal network,
I want to be able to deploy a <code>plakar</code> server on a dedicated server at some provider and use it safely.</p><p>Finally,
I began <strong>building an UI to browse snapshots</strong> and this requires building a global index of snapshots,
which is something I haven&rsquo;t tackled yet.
At this point,
<strong>each snapshot has its own index</strong> but I&rsquo;d like to be able to have a search box which <strong>looks up for stuff through all snapshots</strong>.</p><p>I also have other private plans with this which I&rsquo;ll discuss later ;-)</p><hr><p>Comments: <a href=https://github.com/poolpOrg/poolp.org/issues/86>https://github.com/poolpOrg/poolp.org/issues/86</a></p></div><div class=after-post-tags><ul class=tags></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="d-block col-md-6" href=https://poolp.org/posts/2021-04-30/april-2021-opensmtpd-plakar-ipcmsg-privsep-and-a-small-hypnosis-talk/>&#171; April 2021: OpenSMTPD, plakar, ipcmsg, privsep and a small hypnosis talk</a>
<a class="d-block col-md-6 text-lg-right" href=https://poolp.org/posts/2021-02-28/february-2021-noosmtpd-libtls-conversion-ciphers-curves-and-protocols/>February 2021: nooSMTPD libtls-conversion, ciphers, curves and protocols &#187;</a><div class=clearfix></div></div></div></div></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">&copy; Copyright Gilles Chehade - All rights reserved</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank rel=noopener href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script src=https://code.jquery.com/jquery-3.4.1.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js integrity=sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script src=/js/mediumish.js></script></body></html>